2026-02-09 / Prospects render performance (5 quick wins) / 1) Day separator counts pre-computed in useMemo Map — eliminates O(n²) filter inside .map(). 2) Date-range useEffect replaced with single-pass for-loop + shallow equality guard on setDateRange. 3) Person-initials filter uses existing claimerMap O(1) lookup instead of teamData.find() per enquiry. 4) POC dropdown options extracted to useMemo (pocOptionsMemo) — removes O(n²) findIndex dedup from every render. 5) userAOW + currentUserEmail hoisted before displayedItems.map() — identical values no longer recomputed per card. Zero behaviour change; tsc --noEmit passes. (~ src/tabs/enquiries/Enquiries.tsx)
2026-02-08 / Lazy-load reporting datasets / Removed auto-trigger refresh that streamed all 13 datasets on Reporting tab entry. Reports now load data on-demand: clicking a report card lazy-loads only its required datasets via handleReportCardClick. "Refresh all" no longer force-navigates to Data Centre. Dashboard CTA always clickable, delegates to handleOpenDashboard which lazy-loads if stale. Subtitle shows "Click a report or refresh to load data" when idle. Data Hub also defers its ops-status/log/month-audit fetches behind a Load button. (~ src/tabs/Reporting/ReportingHome.tsx, ~ src/tabs/Reporting/DataCentre.tsx)
2026-02-09 / Prospects loading optimisation / Mine+Claimed no longer blocks on a full team-wide fetch (5000-row dual-DB query). Uses prop data immediately; team-wide data loads lazily 3s later in background. Loading overlay suppressed during background prefetch when user already has visible data. (~ src/tabs/enquiries/Enquiries.tsx)
2026-02-09 / Pipeline filter cycle fix / Filter buttons now loop: none → has (green) → missing (red) → clear. Previously stuck on red with no reset. Added coloured dot indicators and descriptive tooltips showing current state + next action. (~ src/tabs/enquiries/Enquiries.tsx)
2026-02-09 / Prospects Phase 1a+1b: normalizeEnquiry extraction / Extracted normalizeEnquiry() and detectSourceType() to src/utils/normalizeEnquiry.ts; replaced all inline Enquiry & { __sourceType } patterns with NormalizedEnquiry type alias; fixed missing source field mapping in fetchAllEnquiries path; removed inline detectSourceType from component body; changed loading text to "Loading prospects…". (+ src/utils/normalizeEnquiry.ts, ~ src/tabs/enquiries/Enquiries.tsx, ~ .github/instructions/ROADMAP.md, ~ .github/instructions/WORKSPACE_OPTIMIZATION.md)
2026-02-07 / Matter opening workflow redesign / Replaced checkbox toggle pattern with modern clickable expandable sections (chevron indicators); added section header with guiding copy matching ConflictConfirmationCard design language; removed dead Checkbox imports + checkboxChipStyles; improved "skipped state" message with reassuring copy + checkmark icon; simplified "Who is the opponent?" heading. ClientInfoStep: added section header, role descriptions for each solicitor role, distinct icons (ContactInfo/AddFriend/AuthenticatorApp), auto-pre-select Responsible Solicitor from requestingUser. FlatMatterOpening: added footer hint below Continue button. (~ src/tabs/instructions/MatterOpening/OpponentDetailsStep.tsx, ~ src/tabs/instructions/MatterOpening/ClientInfoStep.tsx, ~ src/tabs/instructions/MatterOpening/FlatMatterOpening.tsx, ~ .github/instructions/ROADMAP.md)
2026-02-06 / Matter opening email + data fixes / Email now sends to fee earner (primary) with LZ + CB in CC instead of hardcoded LZ-only test mode; added getTeamEmail to teamLookup; description pre-populated from instruction ServiceDescription; fee_earner_email added to team_assignments payload; instructionRecords enriched with eid/risk/documents/payments for instruction_summary in email template. (~ server/routes/clioMatters.js, ~ server/utils/teamLookup.js, ~ src/tabs/instructions/MatterOpening/FlatMatterOpening.tsx, ~ src/tabs/instructions/InlineWorkbench.tsx)
2026-02-06 / Matter opening inline in prospects / Portal-wrapped FlatMatterOpening as overlay; Open Matter button wired to local modal; matter pill shows processing state; onMatterSuccess calls onRefreshData + toast; onOpenMatter navigation dispatch removed (no-op). (~ src/tabs/instructions/InlineWorkbench.tsx, ~ src/tabs/enquiries/Enquiries.tsx, ~ .github/instructions/ROADMAP.md)
2026-02-06 / ID review inline in prospects / Portal-wrapped EID action picker, approve modal, request docs modal; approve calls onRefreshData + toast; onOpenIdReview navigation dispatch removed. (~ src/tabs/instructions/InlineWorkbench.tsx, ~ src/tabs/enquiries/Enquiries.tsx)
2026-02-06 / Demo mode enriched / Added DEMO-ENQ-0002 at proof-of-id with EID Refer + PEP Review for testing; added DEMO-ENQ-0003 fully complete; enriched EID records with realistic fields and isDemo flag. (~ src/tabs/enquiries/Enquiries.tsx)
2026-02-06 / Risk assessment inline in prospects / Portal-wrapped risk modal (clipping fix), auto-refresh via onRefreshData on save, processing pill state while modal open, parent toast on save, navigation dispatch removed. (~ src/tabs/instructions/InlineWorkbench.tsx, ~ src/tabs/enquiries/Enquiries.tsx)
2026-02-05 / Fix dataOpsLog SQL persistence / Cache resolved connection string, align INSERT with full table schema (jobId, changedRows, triggeredBy, invokedBy), add clear error logging when pool unavailable. (~ server/routes/dataOperations.js)
2026-02-05 / Instant lookup ops range / Add ops mode with natural-language ranges (e.g. "operations this week") to query dataOpsLog. (~ tools/instant-lookup.mjs)
2026-02-04 / Matter metrics processing cue / Show one dot per metric action and surface active action in the toast body. (~ src/tabs/matters/Matters.tsx, ~ src/components/feedback/ToastProvider.tsx)
2026-02-04 / Enquiry timeline initials source / Remove guessed initials expansion; use actual data and prospect full name for inbound emails. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline entry behaviour / Don't auto-select first item on entry; clarify pitch origin label to "Sent by email" / "Sent as link". (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline type category styling / Add category-based icon containers (circle=communication, square=resource, filled=milestone) for visual distinction across filters, table and timeline. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline case chevron cue / Replace "Open ›" with a subtle rotating chevron that glows when active. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline top banner tone / Apply sharper, more serious styling to the hero banner and contact pills. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline POC initials fix / Preserve existing initials (e.g., LZ) and handle email/local-part cases. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline case badge cue fix / Replace chevron icon with text glyph to avoid runtime errors. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline case badge cue / Add a subtle Open cue to show case badges are selectable. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline POC initials / Derive full POC initials for new and legacy data without guessing. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline case badge date/time / Show time for new-space enquiries and drop year unless different. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline case badge meta / Show date only and claimed initials only in case badges. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline case badges quiet / Simplify case badges further while retaining area colour cue. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline case badges simplification / Reduce visual noise for a more serious, minimal case selector. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline case badges / Apply sharper, more serious case badge styling with clearer hover feedback. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline day separators hover / Table day separators now toggle compact/full labels on hover. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline table striping / Add subtle alternating row backgrounds for readability. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline table sorting / Enable header sorting for Date, Type, Description, and By with shared table header colours. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline table headers / Strengthen table header styling for clearer scanability. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline day separators / Soften table day headers so they sit behind the filter banner. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline filter label / Simplify Filter Activity label to just Filter. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline filter hover highlight / Hovering filter chips now subtly highlights matching timeline entries. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline Type column width / Widen the Type column in table view to avoid wrapping labels. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline By column width / Widen the By column in table view to reduce early wrapping. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline table time-only + forward action / Show time only in grouped table rows and restyle forward action as a subtle inline button. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry table day breakdown / Always show table view day groupings without the collapse toggle. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Prospect case cues simplification / Replace heavy case cards with cleaner CRM-style chips. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline filter clarity / Change “View mode” to “View” and enhance filter bar hierarchy/visual grouping. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline table view / Rename Ledger to Table, default to table view, group rows by day, and emphasise the By column. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Matters table headers + legacy fields / Rename headers and enrich legacy worktype + contact details in the table. (~ src/tabs/matters/MatterTableView.tsx, ~ src/tabs/matters/Matters.tsx)
2026-02-04 / Toast loading indicator / Add a subtle pulsing status dot to loading toasts and simplify the metrics loading message. (~ src/components/feedback/ToastProvider.tsx, ~ src/tabs/matters/Matters.tsx)
2026-02-04 / Outstanding balance cache refresh / Version global cache key and force fresh fetch when falling back to global balances. (~ server/routes/outstandingBalances.js, ~ src/tabs/matters/Matters.tsx)
2026-02-04 / Outstanding balance fallback / Include associated_matter_ids globally and fall back when user-scoped balances are empty. (~ server/routes/outstandingBalances.js, ~ src/tabs/matters/Matters.tsx)
2026-02-04 / Outstanding balance 401 retry / Refresh cached Clio token on user-matters 401 to restore outstanding balances. (~ server/routes/outstandingBalances.js)
2026-02-04 / Matters outstanding balance lookup / Harden Entra ID resolution and fallback to team data to avoid "undefined" user lookups. (~ src/tabs/matters/Matters.tsx)
2026-02-04 / Matters data source cue copy / Expand the v1/v2 tooltip text with reassurance and clearer meaning. (~ src/tabs/matters/MatterOverview.tsx)
2026-02-04 / Matters data source cue placement / Move the v1/v2 origin cue into the Data source badge line. (~ src/tabs/matters/MatterOverview.tsx)
2026-02-04 / Matters legacy client hydration / Add Clio client fetch for legacy matters with auto-load and refresh button. (~ src/tabs/matters/MatterOverview.tsx, ~ src/tabs/matters/Matters.tsx)
2026-02-04 / Matters all-scope access / Allow All scope to show everyone even for non-admins. (~ src/utils/matterNormalization.ts)
2026-02-04 / Matters client resolution + all scope / Allow All scope for fee earners and resolve missing client names in Matters using instruction/workbench data. (~ src/tabs/matters/Matters.tsx)
2026-02-04 / Matters tab open access / Removed the Matters early-access chip and rollout gating so Matters is visible to everyone. (~ src/app/App.tsx, ~ src/app/styles/CustomTabs.tsx, ~ src/app/admin.ts)
2026-02-04 / Payment receipt + link gating / Integrated receipt action into Transaction Details header and hid Create payment link outside localhost. (~ src/tabs/instructions/InlineWorkbench.tsx)
2026-02-04 / Payment ref copy chip / Moved payment ID under description, added standalone Ref column with copy chip + toast feedback. (~ src/tabs/instructions/InlineWorkbench.tsx)
2026-02-04 / Payment bar columns / Split currency and payment ID into dedicated payment bar columns alongside date. (~ src/tabs/instructions/InlineWorkbench.tsx)
2026-02-04 / Payment row compact meta / Moved currency/payment ID into the date column and removed the product box for a tighter payment detail layout. (~ src/tabs/instructions/InlineWorkbench.tsx)
2026-02-04 / Payment workbench hierarchy alignment / Restructured payment expanded details into consistent cards and spacing; aligned bank confirmation card styling. (~ src/tabs/instructions/InlineWorkbench.tsx)
2026-02-04 / Data ops two-card redesign / Replaced monolithic single-panel with two-card layout (Collected Time + WIP), each self-contained with stats, pill-style range presets, inline validation, and single primary action. Collapsible logs section. (~ src/tabs/Reporting/DataCentre.tsx)
2026-02-04 / Instruction context comprehensive data / Expand instruction chip content with instruction-only fields (client ID/type, consent, internal status, ID type, contact, DOB, nationality, notes) and remove pitch-derived data. (~ src/tabs/instructions/InlineWorkbench.tsx)
2026-02-04 / Instruction context rich layout / Redesign instruction chip content panel with header badges (status, ref, passcode, matter), key info strip (client, area, fee earner, stage, amount, matter), and service description section. (~ src/tabs/instructions/InlineWorkbench.tsx)
2026-02-04 / Data ops unified range + auto validation / Default data operations to custom ranges with presets, auto-run validation on operation selection, and add custom-range WIP sync support. (~ src/tabs/Reporting/DataCentre.tsx, ~ server/routes/dataOperations.js)
2026-02-04 / Enquiry timeline active pill colours / Keep status colours for text/icon/tick when a stage pill is selected. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline active pill ticks / Keep completion and issue icons visible when a stage pill is selected. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline connector lighting / Only light connectors when both adjacent stages are complete. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline instruction pill idle style / Match inactive pill styling when no instruction activity exists. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline instruction pill label / Show “Instruction” until there is actual instruction activity. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-04 / Enquiry timeline instructed pill gating / Prevent pitched-only deals from showing Instructed as current unless an instruction exists. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-03 / Timeline icon palette standardised / Shift filter chips and timeline/ledger type icons to a refined monochrome palette. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-03 / Case selector card redesign / Promote case chips into prominent header sub-cards with stronger emphasis and active state treatment. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-03 / Timeline stage entries split / Split pitch into a stage summary entry plus separate outbound email activity, hide inline workbench blocks in timeline cards, strip any embedded workbench markup from email HTML, and ensure stage items render even when dates are missing. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-03 / Workbench lookup fallback / Resolve workbench pipeline data by enquiry ACID or fallback ProspectId/ID when ACID missing. (~ src/tabs/enquiries/Enquiries.tsx)
2026-02-03 / Stage entry enrichment / Expand stage metadata and render comprehensive data bars for enquiry, pitch, instruction, ID, payment, risk, and matter entries. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-03 / dataOpsLog schema design / Design persistent SQL table for data operations audit log with support for multi-source sync, bidirectional operations, and job correlation. Add migration script and lean documentation. (+ tools/db/create-dataopslog-table.mjs, ~ .github/instructions/DATABASE_SCHEMA_REFERENCE.md)
2026-02-03 / Data Hub custom sync controls / Add custom sync action selection (delete/insert), abort support, no-data handling, and tighter date picker styling. (~ server/routes/dataOperations.js, ~ server/utils/sqlHelpers.js, ~ server/index.js, ~ src/tabs/Reporting/DataCentre.tsx)
2026-02-03 / SQL VNET fallback / Prefer SQL_CONNECTION_STRING_VNET when core connection is missing or redacted. (~ server/index.js)
2026-02-03 / Data ops manual gating / Disable data operations scheduler unless explicitly enabled, plus refined date picker styling. (~ server/utils/dataOperationsScheduler.js, ~ src/tabs/Reporting/DataCentre.tsx)
2026-02-03 / Data Hub rebranding / Rename "Data Centre" to "Data Hub" and move entry point to primary action area for better visibility. (~ src/tabs/Reporting/ReportingHome.tsx, ~ src/tabs/Reporting/DataCentre.tsx)
2026-02-03 / Data operations scheduler offset / Offset scheduler by 3 minutes (xx:03) to avoid race conditions with existing 30-minute infrastructure. (~ server/utils/dataOperationsScheduler.js)
2026-02-03 / Data operations scheduling / Add server-side collected-time schedules (30m daily + 23:00 rolling), live processing log, and richer progress logging for App Insights. (~ server/utils/dataOperationsScheduler.js, ~ server/routes/dataOperations.js, ~ src/tabs/Reporting/DataCentre.tsx, ~ server/index.js)
2026-02-03 / Data centre streamlining / Remove redundant All feeds section now that grouped feeds cover the same data. (~ src/tabs/Reporting/DataCentre.tsx)
2026-02-03 / Data centre data previews / Add per-dataset data preview buttons (incl. core + instructions tables), clarify collected/recorded fills, and expand preview endpoint table coverage. (~ src/tabs/Reporting/DataCentre.tsx, ~ server/routes/dataOperations.js)
2026-02-03 / Prospects pitch data fetch / InlineWorkbench now fetches pitch content from /api/pitches when pitch context is activated, showing loading and empty states. Uses effectivePitch to merge item data with fetched content. (~ src/tabs/instructions/InlineWorkbench.tsx)
2026-02-03 / Prospects pitch chip redesign / Pitch context in InlineWorkbench now shows rich enquiry-style layout with header (Pitched badge + time + passcode), key info strip (Area, Pitched By, Amount, Service, Client), and pitch content preview. (~ src/tabs/instructions/InlineWorkbench.tsx)
2026-02-03 / Data centre expansion / Promote Data centre chip, route refresh to it, and add live inspection view with dataset status and manual refresh actions. (~ src/tabs/Reporting/ReportingHome.tsx, + src/tabs/Reporting/DataCentre.tsx)
2026-02-03 / Collected compare tool / Add Clio vs Hub collected comparison helper with SQL-only option. (+ tools/db/compare-collected.mjs)
2026-02-03 / WIP non-chargeable flag / Add dashboard note that WIP includes non-chargeable time. (~ src/tabs/Reporting/ManagementDashboard.tsx)
2026-02-03 / DB table lookup range mode / Add date-range lookups to the Core Data table tool. (~ tools/db/table-lookup.mjs)
2026-02-03 / DB table lookup tool / Add generic Core Data lookup script for schema and record inspection. (+ tools/db/table-lookup.mjs)
2026-02-02 / Teams link widget alignment / Align Teams widget deep link build with server-style encoding and open links via Teams when available. (~ src/components/TeamsLinkWidget.tsx)
2026-02-02 / Enrichment retry cooldown / Allow visible enquiries with empty enrichment to retry after a short cooldown instead of staying permanently empty after a failure. (~ src/tabs/enquiries/Enquiries.tsx)
2026-02-02 / Pipeline chips status alignment / Pipeline chips now derive status from inline workbench logic (EID, payments, risk, matter, docs) with processing/neutral support. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-02 / Pipeline chips restyled / Connected pill pipeline chips with workbench-aligned status colours. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-02 / Timeline view toggle clarity / Switched to a segmented Cards/Ledger control to match filter banner style. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-02 / Timeline default collapsed / Timeline now starts collapsed by day on initial load. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-02 / Timeline header filters clarified / Merged activity filters into the timeline header (second row) with clearer labels and counts. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-02 / Timeline density toggle removal / Removed compact view toggle; timeline uses comfortable spacing only. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-02 / Timeline filter banner relocation / Moved the timeline activity filter banner to be the timeline header in main content. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-02-02 / Timeline filter banner consolidation / Moved jump/navigation + density controls into the timeline filter header and removed the old filter banner. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-31 / Unified command bar workbench integration / Moved workbench from separate card into the unified command bar as TIER 5 (Integrated Workbench). Collapsible section with status pills when collapsed (instruction status, risk level, matter status). Eliminates duplication between pipeline bar and workbench. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-31 / Timeline filter UX simplification / Changed pitch chip click behavior: now scrolls directly to the first pitch item in timeline instead of showing a separate "Filtered View" section. Filters now only show the Quick Access section when user manually toggles them. Timeline card mode now also respects activeFilters. Removes duplication between workbench and filtered view. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-31 / Enquiry pipeline + hover UX / Extended pipeline bar to full 7 stages (Enq→Pitch→Inst→ID→Pay→Risk→Matter) with status-aware styling. Added comprehensive Apple/MS-style hover effects: pipeline stages scale+glow, action buttons lift+shadow, timeline cards slide, icon buttons scale+press, activity filters highlight. Smooth cubic-bezier transitions throughout. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-31 / NetDocuments search + metadata display / Enhance search results and folder contents UI with extension, modified date, modified by. Increase results limit to 20 with richer layout. (~ src/components/ResourcesModal.tsx)
2026-01-31 / NetDocuments v1/v2 API routes / Add workspace-contents and folder-contents routes using v1 Workspace + v2 container sub endpoints with proper metadata. (~ server/routes/resources-core.js, ~ src/components/ResourcesModal.tsx)
2026-01-31 / NetDocuments browser rework / Replace scattered NetDocuments cards with unified hierarchical browser: workspace lookup → breadcrumb folder navigation → scoped search. Remove broken sub-containers call. (~ src/components/ResourcesModal.tsx)
2026-01-31 / Home metrics count-up stabilisation / Stop TimeMetricsV2 cards remounting on refresh to prevent repeat count-up animations. (~ src/components/modern/TimeMetricsV2.tsx)
2026-01-31 / Metrics animation storage fallback / Disable count-up when sessionStorage is unavailable to avoid repeated animations. (~ src/components/modern/TimeMetricsV2.tsx, ~ src/components/modern/EnquiryMetricsV2.tsx)
2026-01-31 / Enquiry comparison ranges / Align previous week/month comparisons to same elapsed days and avoid local recalculation in production. (~ server/routes/home-enquiries.js, ~ src/tabs/home/Home.tsx)
2026-01-31 / Enquiry metric diagnostics / Expand conversion/enquiry details modal with underlying values and comparison windows; add user switch recalculation cue. (~ src/components/modern/EnquiryMetricsV2.tsx, ~ src/tabs/home/Home.tsx, ~ src/app/App.tsx)
2026-01-31 / Enquiry records inspection / Add home-enquiries details endpoint and surface raw records in the metrics details modal. (~ server/routes/home-enquiries.js, ~ src/components/modern/EnquiryMetricsV2.tsx, ~ src/components/modern/TimeMetricsV2.tsx, ~ src/tabs/home/Home.tsx)
2026-01-31 / Enquiry details simplification / Show only underlying records in the metrics details modal for validation. (~ src/components/modern/EnquiryMetricsV2.tsx)
2026-01-31 / Enquiry metrics scope / Remove team inbox from user-scoped home enquiry metrics and records. (~ server/routes/home-enquiries.js)
2026-01-31 / Home enquiries LZ override / Route LZ home enquiry metrics to AC to match demo expectation. (~ server/routes/home-enquiries.js)
2026-01-31 / Metrics skeleton refinement / Keep cards visible while only animating data placeholders during loading. (~ src/components/modern/TimeMetricsV2.tsx, ~ src/components/modern/EnquiryMetricsV2.tsx)
2026-01-31 / Resources NetDocuments workbench / Expand NetDocuments operations (user, containers, sub-containers, documents, search) with carry-over inputs. (~ src/components/ResourcesModal.tsx, ~ src/tabs/resources/Resources.tsx)
2026-01-31 / Resource workbench dark mode / Apply on-brand dark button styling in resource workbench. (~ src/components/ResourcesModal.tsx)
2026-01-31 / Resources chip workbench panel / Open resource chips in a dedicated BespokePanel page instead of inline sections. (~ src/components/ResourcesModal.tsx, ~ src/tabs/resources/Resources.tsx)
2026-01-31 / Resources workbench overlay z-index / Ensure resource panel opens above the resources modal layer. (~ src/app/functionality/BespokePanel.tsx, ~ src/components/ResourcesModal.tsx)
2026-01-31 / Enquiry case windows / Add enquiry case index and scope timeline/quick access to the active enquiry window. (~ src/tabs/enquiries/EnquiryTimeline.tsx, ~ src/tabs/enquiries/Enquiries.tsx)
2026-01-31 / Demo prospect cases / Demo mode now seeds multiple enquiries for the same prospect so case windows are visible. (~ src/components/UserBubble.tsx, ~ src/tabs/enquiries/Enquiries.tsx)
2026-01-31 / Demo timeline items / Inject demo emails, calls, pitches and documents for demo enquiries in timeline view. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-31 / Demo mode overlay + workbench / Replace demo toast with in-context overlay and seed tabbed workbench data for demo enquiries. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-31 / Prod view hides demo actions / Suppress Resources & Actions when View as Production is enabled. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-31 / Resources NetDocuments lookup / Add NetDocuments workspace lookup operation (Key Vault-backed) in Resources panel. (~ server/routes/resources-core.js, ~ src/tabs/resources/Resources.tsx)
2026-01-31 / NetDocuments auth alignment / Use nd-authurl + Basic auth + scope when fetching NetDocuments access tokens. (~ server/routes/resources-core.js)
2026-01-31 / NetDocuments auth client_id / Build OAuth client_id with repository suffix and default scope full. (~ server/routes/resources-core.js)
2026-01-31 / Resource ops cue / Add subtle ops badge on resource chips with operations. (~ src/tabs/resources/ResourceCard.tsx, ~ src/components/ResourcesModal.tsx)
2026-01-30 / Enquiry timeline workbench context chips / Re-enable enquiry/pitch context chips in timeline + quick access inline workbench for pitch cards. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-30 / Enquiry timeline pitch lookup fix / Fetch pitch content by prospect/acid so timeline shows pitch email instead of checkout-link fallback. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-30 / Resources Asana task lookup / Add Asana task lookup by ID under the Asana resource panel, with a server route to fetch task details. (~ server/routes/resources-core.js, ~ src/components/ResourcesModal.tsx, ~ src/tabs/resources/Resources.tsx, ~ logs/changelog.md)
2026-01-30 / Resources Asana lookup identity / Fall back to cached user data for Asana credentials when Teams context is unavailable. (~ src/components/ResourcesModal.tsx, ~ src/tabs/resources/Resources.tsx)
2026-01-30 / Resources Asana lookup initials / Allow manual initials entry for Asana task lookup when identity is missing. (~ src/components/ResourcesModal.tsx, ~ src/tabs/resources/Resources.tsx)
2026-01-30 / Resources Asana lookup user data / Use current app user data to resolve Asana credentials (no manual initials required). (~ src/app/App.tsx, ~ src/components/ResourcesModal.tsx, ~ src/tabs/resources/Resources.tsx, ~ src/components/ResourcesSidebar.tsx)
2026-01-30 / Resources Asana structure lookups / Add Asana team, user, project, and section lookup operations with dependent selection. (~ server/routes/resources-core.js, ~ src/components/ResourcesModal.tsx, ~ src/tabs/resources/Resources.tsx)
2026-01-30 / Resources Asana silos UI / Redesign the Asana operations panel and load section tasks for the selected project. (~ server/routes/resources-core.js, ~ src/components/ResourcesModal.tsx, ~ src/tabs/resources/Resources.tsx)
2026-01-30 / Resources Asana ops selector / Add operation picker, full team user list, gated project selection, and board-style task columns. (~ src/components/ResourcesModal.tsx, ~ src/tabs/resources/Resources.tsx)
2026-01-30 / Azure box get-user action / Route “Get user” through /api/resources/analytics/graph-user using Key Vault client credentials. (~ server/routes/resources-analytics.js, ~ server/index.js, ~ src/components/ResourcesModal.tsx, ~ src/tabs/resources/Resources.tsx)
2026-01-30 / Resources Clio lookups / Add Clio contact + matter lookup tools under the Clio resource panel. (~ server/routes/resources-core.js, ~ server/index.js, ~ src/components/ResourcesModal.tsx, ~ src/tabs/resources/Resources.tsx)
2026-01-30 / Resources modal action panel / Show an on-brand in-app action panel when selecting a resource, instead of navigating to a blank page. (~ src/components/ResourcesModal.tsx)
2026-01-30 / Resources Teams link open / Use Teams `app.openLink` for resource opens to avoid blank pages in Teams webview. (~ src/components/ResourcesModal.tsx, ~ src/tabs/resources/Resources.tsx)
2026-01-30 / Resources open-link fallback / Add pop-up blocked fallback (navigate current tab) for resource opens, fixing Azure clicks in Teams. (~ src/components/ResourcesModal.tsx, ~ src/tabs/resources/Resources.tsx)
2026-01-30 / Resources local operations panel / Clicking a resource now reveals an inline operations section (open/copy/pin) within the Resources tab. (~ src/tabs/resources/Resources.tsx)
2026-01-30 / Matters user switching cue / Show an in-context “Switching user…” overlay in Matters while data reloads (prevents void feeling on slow switches). (~ src/index.tsx, ~ src/tabs/matters/Matters.tsx)
2026-01-30 / Immediate actions empty-state collapse / Auto-collapse the “All caught up” card shortly after it appears with a smooth transition. (~ src/tabs/home/ImmediateActionsBar.tsx)
2026-01-30 / Teams tab scrolling / Added a dedicated scroll region so tab content can scroll inside Teams without locking the app shell. (~ src/app/App.tsx, ~ src/app/styles/index.css)
2026-01-30 / Instant lookup person name matching / Fix single-token surname searches (e.g. “Bedwell”) to match against last name too; prefer exact full-name matches without dropping near matches. (~ tools/instant-lookup.mjs)
2026-01-30 / Agent lookup guidance / Clarify that pipeline requests must use `instant-lookup pipeline` (not `person`) to reliably resolve legacy-space enquiries. (~ .github/copilot-instructions.md)
2026-01-30 / Lookup flow: drop default --plan / Make `--plan` optional (only when requested) so lookups can be chat-confirmed then executed directly. (~ .github/copilot-instructions.md)
2026-01-29 / AML review report (12 months) / Added scripts/amlReview12Months.mjs to produce a pasteable summary of non-UK ties (POID) and PEP warning counts (IDVerifications + periodic-compliance), with Key Vault-backed SQL connection fallback. (+ scripts/amlReview12Months.mjs)
2026-01-29 / Annual leave auto-book for AC/JW / For Alex (AC) and Jonathan (JW), new annual leave requests now skip approval/booking and are inserted as booked; booked entries create Clio+Outlook calendar events immediately, and approval updates coerce to booked. (~ server/routes/attendance.js, ~ src/CustomForms/AnnualLeaveForm.tsx)
2026-01-29 / Matters tab production rollout / Enabled Matters tab in production for Luke/Alex/Cass only, with a subtle in-tab Production indicator for those users. (~ src/app/admin.ts, ~ src/app/App.tsx, ~ src/tabs/matters/Matters.tsx)
2026-01-29 / AML report runbook / Added a runbook documenting how the AML 12-month report is produced, including data sources, windowing, PEP classification, and coverage gaps. (+ docs/AML_REVIEW_12_MONTH_REPORT_RUNBOOK.md)
2026-01-29 / Non-billable time report / Added scripts/reportNonBillableTime.mjs to report month-to-date non-billable hours per active fee earner using the same Clio activity flags as matter metrics. (+ scripts/reportNonBillableTime.mjs)
2026-01-29 / Non-billable report runbook / Added a runbook documenting how the Clio non-billable report is produced, including prerequisites, logic, and troubleshooting. (+ docs/NON_BILLABLE_CLIO_REPORT_RUNBOOK.md)
2026-01-28 / Instant lookup pipeline lookup / Added pipeline mode to return full pipeline data from any key (enquiry/pitch/instruction/matter). (~ tools/instant-lookup.mjs, ~ .github/copilot-instructions.md)
2026-01-28 / Instant lookup pipeline legacy fix / Removed invalid Matter_Ref selection from legacy enquiries to restore name lookups. (~ tools/instant-lookup.mjs)
2026-01-28 / Instant lookup legacy columns / Remove invalid Area_of_Work selection from legacy enquiries for pipeline name lookups. (~ tools/instant-lookup.mjs)
2026-01-28 / Instant lookup legacy payloads / Switch legacy pipeline lookups to SELECT * for full enquiry payloads. (~ tools/instant-lookup.mjs)
2026-01-28 / Instant lookup flexible legacy search / Build schema-aware name/email/phone/ID filters for legacy/new enquiries in pipeline lookups. (~ tools/instant-lookup.mjs)
2026-01-28 / Instant lookup full-name matching / Add full-name column and first+last concatenation matching for pipeline lookups. (~ tools/instant-lookup.mjs)
2026-01-28 / Instant lookup person schema guard / Use schema-aware filters for person lookups to avoid missing-column errors. (~ tools/instant-lookup.mjs)
2026-01-28 / Instant lookup new enquiries guard / Use schema-aware ID/email columns for new-space enquiries in pipeline lookups. (~ tools/instant-lookup.mjs)
2026-01-29 / Instant lookup column normalisation / Resolve column names case/format-insensitively to prevent invalid-column errors in name matching. (~ tools/instant-lookup.mjs)
2026-01-29 / Instant lookup instruction email guard / Use schema-aware email columns for Instructions lookup to avoid invalid ClientEmail errors. (~ tools/instant-lookup.mjs)
2026-01-29 / Instant lookup full-name filter / When a full name is provided, filter legacy/new enquiries to exact full-name matches before building pipeline keys. (~ tools/instant-lookup.mjs)
2026-01-29 / Instant lookup strict full-name / Use strict full-name matching (first+last AND/concat) for person/pipeline name lookups. (~ tools/instant-lookup.mjs)
2026-01-28 / Instant lookup plan mode / Added --plan to preview operations without executing; documented chat-first confirmation. (~ tools/instant-lookup.mjs, ~ .github/copilot-instructions.md)
2026-01-28 / Instant lookup confirm-first mode / Added --confirm to show the intended operation and require explicit yes before running. (~ tools/instant-lookup.mjs, ~ .github/copilot-instructions.md)
2026-01-28 / Instant lookup person simplification / Person lookups now return enquiries only (legacy + new) and skip deals/instructions joins. (~ tools/instant-lookup.mjs)
2026-01-28 / Instant lookup Key Vault resilience / Auto-resolve SQL connection strings via Key Vault with a fast timeout for instant lookups; document behaviour. (~ tools/instant-lookup.mjs, ~ .github/copilot-instructions.md)
2026-01-28 / Root cleanup: remove dead placeholders / Deleted empty placeholders and orphaned JSON files. (- server/utils/connectionManager.js, - api/update-enquiry.js, - api/deploy.sh, - api/.funcignore, - server/routes/aiden.json, - server/routes/x.json)
2026-01-28 / Root cleanup: remove build artefacts / Removed ignored build outputs from root and appPackage to keep repo clean. (- build/, - appPackage/build/)
2026-01-28 / Root cleanup: remove unused CRA override / Removed legacy CRA override file now unused after the CRACO switch. (- config-overrides.js)
2026-01-28 / Key Vault SQL fallback / Resolve SQL connection strings from Key Vault when env values are missing or redacted, before warming SQL pools. (~ server/index.js)
2026-01-28 / Fluent UI webpack resolution fix / Route CRA builds through CRACO and allow extensionless ESM imports to fix @fluentui/react module resolution errors. (+ craco.config.js, ~ package.json)
2026-01-28 / Database folder cleanup / Removed redundant attendance schema snapshot and rate update note; migrations removed by request (use live schema + changelog). (~ database/attendance-schema.sql, ~ database/migrations/010_2025_rate_update.md, ~ database/migrations/*, ~ .github/instructions/TEAM_DATA_REFERENCE.md)
2026-01-28 / Docs consolidation references / Added consolidated docs (PLATFORM_OPERATIONS, INSTRUCTIONS_REFERENCE, ENQUIRIES_REFERENCE, DOCUMENTS_REFERENCE, EMAIL_REFERENCE, INTEGRATIONS_REFERENCE, AZURE_OPERATIONS) and updated instructions/README links; added product guardrails + roadmap item. (~ docs/*.md, ~ .github/copilot-instructions.md, ~ .github/instructions/ROADMAP.md, ~ .github/instructions/ARCHITECTURE_DATA_FLOW.md, ~ .github/instructions/ENQUIRIES_TABLE_DESIGN_PATTERN.md, ~ README.md, ~ server/utils/logger.js, ~ server/routes/logs-stream.js)
2026-01-28 / Docs consolidation deletions / Removed consolidated legacy docs now covered by new reference files. (~ docs/*.md)
2026-01-28 / Remove one-off lookup scripts / Deleted temporary SQL/Clio lookup scripts and documented no-commit guidance. (~ scripts/dry-run-delete-test-matters.mjs, ~ scripts/dry-run-delete-specific-matters.mjs, ~ scripts/delete-specific-matters.mjs, ~ scripts/find-clio-contacts-for-matters.mjs, ~ .github/instructions/DATABASE_SCHEMA_REFERENCE.md)
2026-01-28 / Remove hardcoded credential scripts / Deleted ad-hoc scripts containing hardcoded SQL credentials. (~ scripts/queryEnquiry.mjs, ~ scripts/check-join.mjs, ~ scripts/cleanup-teresa-test.mjs, ~ scripts/check_prod_scenarios.py)
2026-01-28 / Secret redaction sweep / Removed hardcoded credentials and client-specific scripts; redacted passwords from env/docs; converted analysis scripts to use SQL_CONNECTION_STRING. (~ scripts/queryEnquiry.mjs, ~ scripts/check-join.mjs, ~ scripts/check-matter-refs.mjs, ~ scripts/fix-teresa-deal.mjs, ~ scripts/fix-teresa-prospectid.mjs, ~ scripts/verify-teresa-deal.mjs, ~ scripts/dry-run-delete-test-matters.mjs, ~ scripts/dry-run-delete-specific-matters.mjs, ~ scripts/delete-specific-matters.mjs, ~ scripts/find-clio-contacts-for-matters.mjs, ~ scripts/feeAnalysisDetailed.mjs, ~ scripts/rollingAvgFeePerMatter.mjs, ~ scripts/truePerMatterAvg.mjs, ~ .env, ~ env/.env.dev, ~ prod-settings.txt, ~ docs/SECURITY_FIX_CHECKLIST.md, ~ docs/INSTRUCT_PITCH_PENDING_CHANGES.md)
2026-01-28 / Tools migration + scripts exclusion / Moved reusable ops scripts to tools/ and excluded scripts/ from git; updated agent instructions and lookup guidance. (~ tools/sync-context.mjs, ~ tools/session-start.mjs, ~ tools/update-submodules.mjs, ~ tools/validate-instructions.mjs, ~ tools/instant-lookup.mjs, ~ .github/copilot-instructions.md, ~ .github/instructions/DATABASE_SCHEMA_REFERENCE.md, ~ .gitignore)
2026-01-28 / Docs cleanup / Removed one-off analyses, fix summaries, and non-doc artefacts; moved Key Vault setup script to tools. (~ docs/*, ~ tools/setup-keyvault-secrets.ps1, ~ docs/SECURITY_FIX_CHECKLIST.md)
2026-01-28 / Docs audit continuation / Consolidated Azure/email references and removed legacy UI/design docs to reduce noise. (~ docs/AZURE_CONFIG_REFERENCE.md, ~ docs/EMAIL_SYSTEM_QUICK_REFERENCE.md, ~ docs/MAINTENANCE_GUIDELINES.md, ~ docs/*)
2026-01-28 / Matter pipeline typing fix / Resolve circular memo typing errors after adding enquiry matching fallbacks. (~ src/tabs/matters/MatterOverview.tsx)
2026-01-28 / Matter pipeline enquiry matching / Add instruction-ref + email/name fallbacks so Origin & Pipeline notes resolve when prospect IDs don’t align. (~ src/tabs/matters/MatterOverview.tsx)
2026-01-28 / Matter pipeline ID parsing / Broaden instruction ref parsing so non-HLX refs still resolve prospect IDs for enquiry notes. (~ src/tabs/matters/MatterOverview.tsx)
2026-01-28 / Matter enquiry notes sync / Inject enquiry data into pipeline workbench so notes/value appear for new vs legacy enquiries. (~ src/app/App.tsx, ~ src/tabs/matters/Matters.tsx, ~ src/tabs/matters/MatterOverview.tsx, ~ src/tabs/instructions/InlineWorkbench.tsx)
2026-01-28 / Matter pipeline prospect ID source / Prefer deal ProspectId over instructionRef parsing when matching enquiries for workbench notes. (~ src/tabs/matters/MatterOverview.tsx)
2026-01-28 / Matter enquiry match normalisation / Normalise enquiry keys (including ProspectId) for more reliable workbench note linking. (~ src/tabs/matters/MatterOverview.tsx)
2026-01-28 / Matter enquiry match schema alignment / Match workbench enquiries by legacy ID or new acid only. (~ src/tabs/matters/MatterOverview.tsx)
2026-01-28 / Matters enquiry dataset reuse / Reuse unified team-wide enquiries from Prospects (All) instead of re-fetching for Matters. (~ src/app/App.tsx, ~ src/tabs/enquiries/Enquiries.tsx)
2026-01-28 / Matters targeted enquiry fetch / Fetch single enquiry by prospectId when opening workbench to avoid full dataset load. (~ src/tabs/matters/MatterOverview.tsx, ~ server/routes/enquiries-unified.js)
2026-01-28 / Test matter cleanup dry run / Added dry-run script to preview SQL+Clio deletions for TEST/BENNE matters. (~ scripts/dry-run-delete-test-matters.mjs)
2026-01-28 / Agent DB query guidance / Documented ESM-safe mssql import for terminal scripts. (~ .github/copilot-instructions.md, ~ .github/instructions/DATABASE_SCHEMA_REFERENCE.md)
2026-01-28 / Enquiries linkage clarity / Documented legacy vs new enquiries and ProspectId→acid linkage order. (~ .github/instructions/DATABASE_SCHEMA_REFERENCE.md)
2026-01-28 / Workbench enquiry detail focus / Remove the unified origin summary strip and expand enquiry detail fallbacks/notes visibility. (~ src/tabs/instructions/InlineWorkbench.tsx)
2026-01-28 / Matter detail tabs gating / Disable Activities, Documents, Comms, and Billing tabs in production with a hover hint. (~ src/tabs/matters/Matters.tsx)
2026-01-28 / Matter quick info tone / Soften Quick Info value text to match the email/phone tone. (~ src/tabs/matters/MatterOverview.tsx)
2026-01-28 / Matter client detail tone / Soften client detail value text to match the email/phone tone in the client box. (~ src/tabs/matters/MatterOverview.tsx)
2026-01-28 / Matter WIP alignment / Exclude billed/on-bill activities so WIP matches Clio, while keeping total hours across all activities. (~ server/routes/matter-metrics.js)
2026-01-27 / Inline workbench clarity pass / Add summary strip, increase padding, and space sections for a clearer, more purposeful inline workbench. (~ src/tabs/instructions/InlineWorkbench.tsx)
2026-01-27 / Toast label clipping fix / Increase toast title/message line-height and padding to prevent cropped labels. (~ src/components/feedback/ToastProvider.tsx)
2026-01-27 / Clio token retry hardening / Retry Clio calls on 401 and fall back when open_date fields are rejected during matter audit. (~ server/routes/matter-metrics.js, ~ server/routes/matter-audit.js)
2026-01-26 / Matters metrics pending handling / Resolve Clio IDs via instructions DB and return pending status when matters are not yet created, avoiding hard errors for placeholders. (~ server/routes/matter-metrics.js, ~ src/tabs/matters/Matters.tsx, ~ src/tabs/matters/MatterOverview.tsx)
2026-01-27 / Matters client details linkage / Normalise InstructionRef variants and canonicalise missing HLX prefix so pipeline client details reliably show. (~ src/utils/matterNormalization.ts, ~ src/tabs/matters/MatterOverview.tsx)
2026-01-27 / Matters request clarity / Add placeholder hint and label Request ID when the record is a MatterRequest without an Instruction link. (~ src/tabs/matters/MatterOverview.tsx)
2026-01-27 / Matter request patching / Store matter request id, capture Clio display number, and patch placeholder matter rows after instruction sync completes. (~ server/routes/matterRequests.js, ~ src/tabs/instructions/MatterOpening/processingActions.ts)
2026-01-27 / Matter sync audit mode / Add Clio sync audit endpoint and UI toggle for new matters, showing mismatch cues for key fields. (+ server/routes/matter-audit.js, ~ server/index.js, ~ server/server.js, ~ src/tabs/matters/Matters.tsx, ~ src/tabs/matters/MatterOverview.tsx)
2026-01-27 / Matter id backfill script / Add one-off backfill script to repair new-space placeholder MatterRequest IDs using Instructions.MatterId and optional Clio display numbers. (+ scripts/backfill-new-matter-ids.js)
2026-01-27 / Matter header alignment / Prefer workbench display number + client name in the header and show real matter id with separate request id when present. (~ src/tabs/matters/MatterOverview.tsx)
2026-01-27 / Matter opening modal labels / Add line-height and padding to prevent confirmation modal titles clipping. (~ src/tabs/instructions/MatterOpening/IdentityConfirmationCard.tsx, ~ src/tabs/instructions/MatterOpening/ConflictConfirmationCard.tsx)
2026-01-26 / Matters metrics loading / Add per-matter metrics routes (WIP + client funds), parallel client fetches with toasts, and per-card loading skeletons. (~ server/routes/matter-metrics.js, ~ server/index.js, ~ src/tabs/matters/Matters.tsx, ~ src/tabs/matters/MatterOverview.tsx)
2026-01-26 / Matters details expansion / Add instruction, source/referrer, value, opponent solicitor, method, rating, and original status fields to Matter Details. (~ src/tabs/matters/MatterOverview.tsx)
2026-01-26 / Matters client copy chips / Remove client avatar and add copy chips for email/phone in the client sidebar. (~ src/tabs/matters/MatterOverview.tsx)
2026-01-26 / Matters details + team merge / Merge Team into Matter Details and switch detail rows to a two-column grid layout. (~ src/tabs/matters/MatterOverview.tsx)
2026-01-26 / Matters client sidebar enrichment / Clean up contact layout, add personal + company details from pipeline data, and switch avatar for company clients. (~ src/tabs/matters/MatterOverview.tsx)
2026-01-26 / Matters data source chip / Add legacy/all/new-only toggle state so admins can isolate new matters. (~ src/tabs/matters/Matters.tsx)
2026-01-26 / Matters detail tabs in banner / Move matter detail Pivot tabs into the sticky banner row alongside Back (Enquiries-style). (~ src/tabs/matters/Matters.tsx, ~ src/tabs/matters/MatterOverview.tsx)
2026-01-26 / Matters detail skeleton + entry / Add a quick skeleton placeholder and subtle entry animation on matter click-through to avoid blank/void loading states. (~ src/tabs/matters/Matters.tsx, ~ src/tabs/matters/MatterOverview.tsx)
2026-01-26 / Matters actions column / Add call+email buttons to table rows (no unlock/edit/delete yet). (~ src/tabs/matters/MatterTableView.tsx)
2026-01-26 / Rate change admin gating / Make Clio->SQL sync and CCL Date write operations admin-only (UI + server-side initials gate). (~ src/tabs/home/RateChangeModal.tsx, ~ server/routes/rate-changes.js, ~ server/routes/ccl-date.js)
2026-01-26 / Matters detail brand pass / Flatten Matter detail surfaces (smaller radii, calmer hover), sharpen skeletons, and add localhost-only wiring hint for backend metrics. (~ src/tabs/matters/MatterOverview.tsx, ~ src/tabs/matters/Matters.tsx)
2026-01-26 / Matters pipeline groundwork / Add an Origin & Pipeline section in matter detail with instruction/prospect linkage and placeholder pipeline status chips. (~ src/tabs/matters/MatterOverview.tsx)
2026-01-26 / Matters workbench mirror / Embed read-only InlineWorkbench in matter detail with derived pipeline payload (pending real pipeline feed). (~ src/tabs/matters/MatterOverview.tsx)
2026-01-26 / Matters pipeline consolidation / Remove separate Origin & Pipeline panel and rename workbench section to Origin & Pipeline. (~ src/tabs/matters/MatterOverview.tsx)
2026-01-25 / Matters table timeline alignment / Add timeline header icon and shift row icon to respect the timeline gutter. (~ src/tabs/matters/MatterTableView.tsx)
2026-01-23 / Enquiries pipeline resize / Re-measure pipeline columns on tab focus/visibility to fix Teams embedded view. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-23 / Pitch costs wording / Restore original costs paragraph with explicit role rates in pitch scenario. (~ src/tabs/enquiries/pitch-builder/scenarios.ts)
2026-01-23 / Pitch amount sync guard / Limit auto-sync to estimate/budget phrasing so rates are not overwritten. (~ src/tabs/enquiries/pitch-builder/EditorAndTemplateBlocks.tsx)
2026-01-23 / VAT toggle emphasis / Strengthen No VAT (international) styling with an info-blue emphasis. (~ src/tabs/enquiries/pitch-builder/DealCapture.tsx)
2026-01-23 / Prospect notes header actions / Align notes actions with the Notes label in the section header. (~ src/tabs/enquiries/components/ProspectHeader.tsx)
2026-01-23 / Prospect notes whiteboard / Remove duplicate notes header and add a resizable temporary whiteboard panel with session-only copy. (~ src/tabs/enquiries/components/ProspectHeader.tsx)
2026-01-23 / Enquiries table name copy feedback / Swap name copy icons to success ticks with animated feedback in main + child rows. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-23 / Prospect header contact copy feedback / Swap email/phone copy icons to animated ticks with success styling when copied. (~ src/tabs/enquiries/components/ProspectHeader.tsx)
2026-01-23 / Pitch builder header actions / Fix copy fallback and refine copy/preview button states with press/hover feedback. (~ src/tabs/enquiries/pitch-builder/EditorAndTemplateBlocks.tsx)
2026-01-23 / Pitch builder header actions / Move copy/preview into the email body title bar and redesign button states. (~ src/tabs/enquiries/pitch-builder/EditorAndTemplateBlocks.tsx)
2026-01-23 / Pitch builder preview toggle / Move preview toggle into the email body title bar to avoid overlaying content. (~ src/tabs/enquiries/pitch-builder/EditorAndTemplateBlocks.tsx)
2026-01-23 / Pitch builder focus border / Restore focus border on the email body container around the header/tools. (~ src/tabs/enquiries/pitch-builder/EditorAndTemplateBlocks.tsx)
2026-01-23 / Pitch builder editor shell / Remove inner editor box styling for the email body text area. (~ src/tabs/enquiries/pitch-builder/EditorAndTemplateBlocks.tsx)
2026-01-23 / Pitch builder body shell / Remove the outer pitch-step-card shell around the email body area. (~ src/tabs/enquiries/pitch-builder/EditorAndTemplateBlocks.tsx)
2026-01-22 / Pitch builder scenario neutrality / Flatten scenario card corners and soften selection emphasis. (~ src/tabs/enquiries/pitch-builder/EditorAndTemplateBlocks.tsx)
2026-01-22 / Prospect header animation guard / Prevent repeated entry animations in the Prospect & Enquiry header. (~ src/tabs/enquiries/components/ProspectHeader.tsx)
2026-01-22 / Pitch builder scenario tone / Inline pitch history text in step 1 and neutralise scenario card base styling. (~ src/tabs/enquiries/pitch-builder/EditorAndTemplateBlocks.tsx)
2026-01-22 / Prospect header entry cascade / Add subtle content-reveal cascade on the Prospect & Enquiry header for smoother entry. (~ src/tabs/enquiries/components/ProspectHeader.tsx)
2026-01-22 / Pitch builder step 1 header / Show template step header on entry and move pitch history banner into step 1. (~ src/tabs/enquiries/PitchBuilder.tsx, ~ src/tabs/enquiries/pitch-builder/EditorAndTemplateBlocks.tsx, ~ src/tabs/enquiries/pitch-builder/VerificationSummary.tsx)
2026-01-22 / Prospect header skeletons / Add shimmer + cascade loading skeletons to the Prospect & Enquiry header sections. (~ src/tabs/enquiries/components/ProspectHeader.tsx, ~ src/tabs/enquiries/pitch-builder/VerificationSummary.tsx)
2026-01-22 / Custom tabs active style / Remove selected tab pane background so active state is underline-only. (~ src/app/styles/CustomTabs.css)
2026-01-22 / Pitch builder header banner / Flatten Prospect & Enquiry header into a banner with side breathing room and top/bottom separation. (~ src/tabs/enquiries/components/ProspectHeader.tsx)
2026-01-22 / Pitch builder quality polish / Sharpen step/card corners and add smoother transitions for the pitch builder flow. (~ src/tabs/enquiries/pitch-builder/EditorAndTemplateBlocks.tsx)
2026-01-22 / Pitch builder steps containment / Contain wizard steps in compact cards for clearer, more professional grouping. (~ src/tabs/enquiries/pitch-builder/EditorAndTemplateBlocks.tsx)
2026-01-22 / Pitch context banner tone / Switch Pitch Builder context banner to an informational blue style (less warning). (~ src/tabs/enquiries/pitch-builder/VerificationSummary.tsx)
2026-01-22 / Custom tabs active colour / Force highlight blue for active navigation tabs in light mode. (~ src/app/styles/CustomTabs.css)
2026-01-22 / Enquiries sub-tab accent colour / Force highlight blue for Overview/Pitch Builder tab accents in dark mode as well. (~ src/app/styles/CustomTabs.css)
2026-01-22 / Enquiries table open pitch builder / Table-view row click now opens the Pitch builder instead of landing on the overview/timeline by default. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-22 / Pitch builder sync feedback / Add single-flight amount sync with origin token and deduped toast feedback. (~ src/tabs/enquiries/pitch-builder/EditorAndTemplateBlocks.tsx, ~ src/tabs/enquiries/PitchBuilder.tsx)
2026-01-22 / Pitch builder amount live-sync / Simplified amount sync into a deterministic effect, added sync helper + tests to update the email body on every amount change. (~ src/tabs/enquiries/pitch-builder/EditorAndTemplateBlocks.tsx, ~ src/tabs/enquiries/pitch-builder/__tests__/syncAmountIntoBody.test.ts)
2026-01-22 / Dev dashboard health checks upgrade / Replace 3 hardcoded checks with a route registry + observed GET routes from Ops; add reachability semantics, last-checked timestamps, and optional auto-ping interval. (~ src/components/AdminDashboard.tsx)
2026-01-22 / Changelog modal readability / Rename “Release Notes” UI to “Changelog”, group entries by date, include descriptions, add search + collapsible days, and flag that curated Release Notes are planned. (~ src/components/ReleaseNotesModal.tsx, ~ src/components/UserBubble.tsx)
2026-01-22 / Ideas tab simplified / Removed over-detailed “requirements scaffolds”; keep ideas as lightweight flags with tags + short notes. (~ src/components/ReleaseNotesModal.tsx)
2026-01-22 / Financial forms: show submission errors / Financial form submit now surfaces API/network errors (and missing initials) in the UI instead of failing silently; button label shows “Submitting…”. (~ src/tabs/forms/FormDetails.tsx, ~ src/CustomForms/BespokeForms.tsx, ~ server/routes/financialTask.js)
2026-01-22 / Financial forms: Asana refresh resilience / Improve Asana token refresh to use form-encoded body, return structured errors with safe upstream details, and retry transient 5xx/429 so intermittent failures don’t look like “nothing happened”. (~ server/routes/financialTask.js)
2026-01-22 / Dev dashboard redesign / Rework Dev Dashboard into a purpose-built dev tooling portal: integrated Inspector section (embedded, no nested modal), real endpoint health checks, and upgraded Overview/Diagnostics. (~ src/components/AdminDashboard.tsx, ~ src/components/DataInspector.tsx)
2026-01-22 / Asana chip icon / Use Asana SVG icon for the Asana Integration chip in the user bubble. (~ src/components/UserBubble.tsx)
2026-01-22 / Dev dashboard consolidation / Rename Admin Dashboard to Dev Dashboard; remove separate Application Inspector menu entry and expose it from within the Dev Dashboard; drop prompt-based gating that could block opening in Teams. (~ src/components/UserBubble.tsx, ~ src/components/AdminDashboard.tsx)
2026-01-22 / Release notes modal / Add admin-only Release Notes modal (Release notes + Ideas tabs) opened from user bubble; serve changelog via backend endpoint instead of CRA dev proxy; remove dev-only session changes UI. (~ src/components/ReleaseNotesModal.tsx, ~ src/components/UserBubble.tsx, ~ src/app/styles/CustomTabs.tsx, ~ server/routes/release-notes.js, ~ server/index.js, ~ src/tabs/home/Home.tsx, ~ src/tabs/home/QuickActionsBar.tsx, ~ src/setupProxy.js)
2026-01-22 / Top files CSV export / Add script to export top 20 Commercial/Property matters (last 12 months) by opening value and by invoiced (net, Service-only by default; optional includeDisbursements) into 4 CSV files. (~ scripts/exportTopValueFiles.mjs, ~ package.json)
2026-01-21 / Enquiries instruction chip dates / Expand instruction date/time field fallbacks so claimed/all views show date+time instead of Inst. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-20 / Enquiries header/row alignment + carousel / Unify table header+row grid spacing and enforce minimum pipeline chip widths so the carousel triggers (no squishing); reset header carousel offset on tab/view switch. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-20 / Fix enquiries POC chip squish / Adjusted POC and claim chip min widths and centering styles in [src/tabs/enquiries/Enquiries.tsx](src/tabs/enquiries/Enquiries.tsx)
2026-01-20 / POC column alignment / Add box styling to Unclaimed POC header; center POC cell content (claim prompt, initials stack, legacy placeholder) under header without breaking internal 3-element alignment. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-20 / Unclaimed claim button fix / Treat team@helix-law.com and other inbox values as unclaimed; show subtle claim prompt instead of "Team" text; use isUnclaimedPoc helper consistently. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-19 / Unclaimed area filtering removed / Claimable (Unclaimed) tab now shows all enquiries regardless of user's profile Area of Work - users can still optionally filter by area using toggles. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-19 / Matter detail Clio-style redesign / Complete rewrite of MatterOverview with dark mode support, tabbed navigation, metric cards, team display, and client sidebar matching Clio Manage layout. (~ src/tabs/matters/MatterOverview.tsx, ~ src/tabs/matters/Matters.tsx)
2026-01-19 / Matters scope filters / Skip role filter for admin All scope so Mine/All counts diverge correctly. (~ src/tabs/matters/Matters.tsx)
2026-01-19 / Matters scope counts / Align Mine/All counts with admin detection so scope badges update correctly. (~ src/tabs/matters/Matters.tsx)
2026-01-19 / Matters table default / Make table view the only Matters view and default on entry. (~ src/tabs/matters/Matters.tsx)
2026-01-19 / Clients column sizing / Match Clients column widths to the Enquiries grid for consistent spacing. (~ src/tabs/instructions/InstructionTableView.tsx)
2026-01-19 / Clients column order / Reorder Clients table columns to match Enquiries (date, name, ID/value, AOW, pipeline). (~ src/tabs/instructions/InstructionTableView.tsx)
2026-01-19 / Clients actions gating / Hide the edit action until Actions is enabled. (~ src/tabs/instructions/InstructionTableView.tsx)
2026-01-19 / Clients day separators / Replace banner-style day headers with subtle separator lines to match Enquiries. (~ src/tabs/instructions/InstructionTableView.tsx)
2026-01-19 / Clients header hover layout / Shift client name on hover and reveal email in group headers to match Enquiries spacing. (~ src/tabs/instructions/InstructionTableView.tsx)
2026-01-19 / Clients pipeline connector alignment / Tighten instruction pipeline connectors so lines touch chip borders cleanly. (~ src/tabs/instructions/InstructionTableView.tsx)
2026-01-19 / Clients table hover details / Align Clients table detail reveal with Enquiries by showing email/value on row hover. (~ src/tabs/instructions/InstructionTableView.tsx)
2026-01-19 / Instructions search debounce / Debounce Clients/Instructions search input in the FilterBanner to keep typing responsive in large tabs. (~ src/components/filter/FilterBanner.tsx, ~ src/tabs/instructions/Instructions.tsx)
2026-01-19 / Enquiries unclaimed visibility / Treat null/empty/unassigned POC values as unclaimed in UI filtering/suppression. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-19 / Enquiries unclaimed visibility / Include null/empty POC values in Team Inbox filtering so new unclaimed records surface. (~ server/routes/enquiries-unified.js)
2026-01-19 / Enquiries pulse refresh / Add lightweight pulse endpoint + client polling to detect new enquiries from both sources. (~ server/routes/enquiries-unified.js, ~ src/tabs/enquiries/Enquiries.tsx)
2026-01-19 / Enquiries pipeline carousel fix / Prevent post-pitch chips from wrapping into a second row when the carousel is active. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-19 / Enquiries pipeline icons only / Remove status dots so pipeline chips rely on icons and colour. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-19 / Enquiries hover shift / Shift ID/name upward on hover and reveal stacked details without changing row height. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-19 / Matters timeline line offset / Shift accent line to avoid overlapping the matter icon column. (~ src/tabs/matters/MatterTableView.tsx)
2026-01-19 / Enquiries hover layout / Expand ID/email stacks only on hover so names stay centred at rest. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-19 / Matters table parity / Align day separators and group hover cues with the Enquiries table styling. (~ src/tabs/matters/MatterTableView.tsx)
2026-01-19 / Enquiries timeline accents / Increase timeline line prominence at rest and on hover for clearer AOW cues. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-19 / Enquiries row-hover details / Smooth row-hover reveal for email/value with subtle transitions. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-19 / Edit enquiry modal prompts clarity / Restyle access/error/success prompts to match InlineWorkbench status banners for clearer guidance. (~ src/tabs/enquiries/EditEnquiryModal.tsx)
2026-01-19 / Edit enquiry modal redesign / Refresh modal styling, spacing, and input treatments to match the new dark card layout. (~ src/tabs/enquiries/EditEnquiryModal.tsx)
2026-01-19 / Enquiries timeline line AOW colour / Colour the left timeline line per Area of Work. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-19 / Enquiries hover details / Hide email/value until day group hover to reduce table noise. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-19 / Enquiries day separators softened / Replace banner separators with subtle fading lines and extra whitespace. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-19 / Enquiries table layout simplified / Move prospect to the first column and rebalance ID/AOW/Date order for clarity. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-19 / Matters table headers sortable / Add header sorting with date grouping only on Opened. (~ src/tabs/matters/MatterTableView.tsx)
2026-01-19 / Matters legacy data restored / Use unified matters fetch in local dev so legacy/all records are included. (~ src/index.tsx)
2026-01-19 / Matters table aligned to prospects/clients / Match Matters table container + header styling to the Prospects/Clients tables. (~ src/tabs/matters/MatterTableView.tsx)
2026-01-19 / Matters source toggle removed / Show all sources by default and drop legacy/new toggle. (~ src/tabs/matters/Matters.tsx)
2026-01-19 / Matters filter icons + order / Make Mine/All first and add iconed Open/Archived + Responsible/Originating toggles. (~ src/tabs/matters/Matters.tsx)
2026-01-19 / Admin filter cues / Add subtle admin-only rings for Matters dataset toggle and Enquiries Triaged filter. (~ src/tabs/matters/Matters.tsx, ~ src/tabs/enquiries/Enquiries.tsx)
2026-01-19 / Matters initials matching / Match solicitor initials to full names so matters role detection doesn’t drop all records. (~ src/utils/matterNormalization.ts)
2026-01-19 / Conversion metric animation redo / Replace conversion metric count-ups with one-time animated values to stop retriggers on first entry/toggle. (~ src/components/modern/EnquiryMetricsV2.tsx)
2026-01-19 / Home metric animation redo / Replace the home metric count-up with a one-time animated number to stop repeat retriggers on first entry. (~ src/tabs/home/MetricCard.tsx)
2026-01-19 / Home time metrics load timeout / Add a 12s WIP fetch timeout and clear loading state if the home-wip request stalls, preventing infinite loading on first entry. (~ src/tabs/home/Home.tsx)
2026-01-18 / Timeline pitch fallback from enrichment / When no pitches found by enquiry ID, fall back to email-based enrichment data so deals show in workbench. (~ src/tabs/enquiries/EnquiryTimeline.tsx, ~ src/tabs/enquiries/Enquiries.tsx)
2026-01-18 / Enquiries payment chip shows pending color / Payment chip now shows orange/blue for pending payments instead of neutral grey. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-18 / Enquiries eager enrichment prefetch / Fire parallel micro-batches on initial load so hover data is ready before user even scrolls. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-18 / Enquiries enrichment prioritise speed / Increase batch size, remove debounce, and prefetch farther ahead for faster pipeline updates. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-18 / Enquiries pipeline pulse unified / Use a single smooth pulse animation for pitch/ID cue dots to keep timing consistent. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-18 / Enquiries payment icon uses GBP / Replace money stack icon with CurrencyPound in payment pipeline stages to keep the cue visible. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-18 / Enquiries pipeline hover cleanup / Auto-hide stuck pipeline hover tooltip on mouse move off chips, scroll, or window blur. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-18 / Enquiries pipeline placeholder shows instruction / Align loading placeholder pipeline icons with actual stages so Inst appears while processing. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-18 / Enquiries pipeline uses ACID for workbench / Resolve inline workbench lookup by ACID/prospect ID so enquiry pipeline reflects instruction-linked stages. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-18 / Prospect overview selection prefers instruction / Resolve selected overview item by InstructionRef/DealId/ProspectId to align deal clicks with instruction-linked workbench data. (~ src/tabs/instructions/Instructions.tsx)
2026-01-17 / Tech tickets Asana auth + ledger refresh / Use Key Vault + team table Asana credentials for tech tickets and redesign the ledger rows with clearer status chips, readable text, and edit/delete actions. (~ server/routes/techTickets.js, ~ src/CustomForms/shared/TechTicketsLedger.tsx)
2026-01-17 / Tech tickets Asana fixes / Remove workspace ID from task creation and store submitter initials to avoid SQL truncation. (~ server/routes/techTickets.js)
2026-01-17 / Annual leave day selection date compare / Use date-only comparisons for selectable days to prevent time-of-day blocking and zero-day counts. (~ src/CustomForms/AnnualLeaveModal.tsx)
2026-01-17 / Annual leave modal fallback fetch / Modal now self-fetches leave data when Home props are empty to avoid blank history. (~ src/CustomForms/AnnualLeaveModal.tsx)
2026-01-17 / Annual leave timestamps / Added request/approval/booking timestamps with schema migration and history display. (~ server/routes/attendance.js, ~ database/migrations/013_annual_leave_timestamps.sql, ~ src/CustomForms/AnnualLeaveModal.tsx, ~ src/tabs/home/Home.tsx, ~ src/app/functionality/types.ts)
2026-01-17 / Annual leave bulk update / Added multi-select and bulk status/days updates for leave history in the modal. (~ src/CustomForms/AnnualLeaveModal.tsx)
2026-01-17 / Annual leave modal loading skeletons / Show loading skeletons and guard empty states while annual leave data loads. (~ src/CustomForms/AnnualLeaveModal.tsx, ~ src/tabs/home/Home.tsx)
2026-01-17 / Annual leave modal edit refresh / Admin edits now refresh viewed employee data without closing the modal. (~ src/CustomForms/AnnualLeaveModal.tsx)
2026-01-17 / Annual leave modal scroll + ledger cleanup / Removed nested scrollbars and simplified the leave history header controls. (~ src/CustomForms/AnnualLeaveModal.tsx)
2026-01-17 / Annual leave Outlook calendar sync / Create Outlook calendar entries when leave is booked, store event id, and delete on record removal. (~ server/routes/attendance.js, ~ database/migrations/012_annual_leave_outlook_entry_id.sql)
2026-01-17 / Annual leave modal next-year stats swap / Stats card now swaps to a distinct next-fiscal-year layout with clear signposting when the selection is entirely next year. (~ src/CustomForms/AnnualLeaveModal.tsx)
2026-01-17 / Enquiries pipeline hover positioning / Tooltip shows below chip without jolt (removed scaling, animation, centering). (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-16 / Enquiries rating chip + modal descriptions / Rating action chip now reflects Good/Neutral/Poor visuals and the rate modal shows full descriptive text. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-16 / Enquiries actions column / Moved call/email/rate into the right actions column (no hover overlay) and show edit/delete only when Actions is enabled. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-16 / Enquiries table phone hidden / Removed phone display from child enquiry rows to keep pipeline columns aligned. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-16 / Grouped prospect count badge / Moved enquiry count into the chevron badge for grouped prospects (no extra chip). (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-16 / Clear filters resets search / Clearing all filters now resets the debounced search term so results return immediately. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-16 / Grouped prospects clarity / Grouped prospect banner and child rows now label enquiries explicitly (count chip, Prospect label, and per-enquiry index) to avoid confusion. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-16 / Timeline chip cleanup / Inline workbench in enquiry timeline now hides Enquiry/Pitch chips and shows Instructed as green when stage is initialised (without tick). (~ src/tabs/instructions/InlineWorkbench.tsx, ~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-15 / Passcode link copy fallback / Clipboard copy now falls back to execCommand when Clipboard API is blocked (Teams/webview), fixing “copy link” after generation. (~ src/tabs/enquiries/components/ProspectHeader.tsx)
2026-01-15 / Enquiry default tab honours pitch enrichment / Selecting an enquiry now opens Timeline when pitch data or pitch ID is present, avoiding Pitch Builder for already-pitched enquiries. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-15 / Timeline deals unified / Timeline now treats all pitch records as deals and signposts whether each was created via pitch email or link enablement. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-15 / Timeline deal content signposting / Link-enabled deals now show a clear “no email content” callout and hide the forward-email action. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-15 / Timeline doc-request pitch styling / Doc request (workspace) entries now render with a pitch-style icon/chip and distinct colour to match deal items. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-15 / Timeline loading skeletons / Added shimmer skeletons for processing sources and initial timeline load to match Home page loading states. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-15 / Timeline cache revalidation / Session cache now revalidates in the background so newly generated deals appear without hard refresh. (~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-15 / Link-only deal rendering / Manual link deals now show a checkout link block (no email content) in the timeline. (~ src/tabs/enquiries/EnquiryTimeline.tsx, ~ src/tabs/enquiries/PitchBuilder.tsx)
2026-01-15 / Link-only deal flagging / Manual link generation now flags Status=CHECKOUT_LINK (and DealKind if available). (~ src/tabs/enquiries/PitchBuilder.tsx, ~ server/routes/dealCapture.js, ~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-15 / Pitch Builder draft restore guard + timeline cache bust / Draft values (including service description) only restore when resume is enabled; pitches fetch now busts cache so newly captured deals appear immediately. (~ src/tabs/enquiries/PitchBuilder.tsx, ~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-15 / Deal capture de-dupe removed / Removed recent-duplicate detection so every capture creates a new deal/passcode and timeline entry. (~ server/routes/dealCapture.js)
2026-01-15 / Pitch Builder link activation lock / Added activation mode (pitch vs manual) and lockout for scenario/editor when manual activation is selected; updated manual activation helper copy and required field markers. (~ src/tabs/enquiries/components/ProspectHeader.tsx, ~ src/tabs/enquiries/pitch-builder/VerificationSummary.tsx, ~ src/tabs/enquiries/PitchBuilder.tsx, ~ src/tabs/enquiries/pitch-builder/EditorAndTemplateBlocks.tsx)
2026-01-15 / Pitch Builder notes + prompt layout / Moved enquiry notes into the ProspectHeader as a full-width second row and redesigned the pre-scenario pitch-context prompt as an InlineWorkbench-style banner. (~ src/tabs/enquiries/components/ProspectHeader.tsx, ~ src/tabs/enquiries/pitch-builder/VerificationSummary.tsx)
2026-01-15 / Deal details input focus hardening / Switched the Deal details Service description + Amount fields to uncontrolled refs with safe prop sync, preventing focus loss while typing under re-render pressure. (~ src/tabs/enquiries/components/ProspectHeader.tsx)
2026-01-15 / Enable Link input fix + Link Enabled timeline event / Fixed service description input losing focus on each keystroke (was caused by parent state update triggering component re-render). Added 'link-enabled' as a distinct timeline event type for deals captured without sending a pitch email - shows with purple link icon and "Link Enabled" label in both card and ledger views. (~ src/tabs/enquiries/components/ProspectHeader.tsx, ~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-15 / Pitch Builder flattened + Timeline ledger mode / Removed card-based context panel from Pitch Builder header - replaced with minimal inline hints (unconverted pitch warning, notes toggle) so scenario selection appears immediately after the prospect header. Added toggleable "ledger mode" to Enquiry Timeline that renders a clean Clio-style table instead of nested cards with animations. Toggle persists in localStorage. (~ src/tabs/enquiries/pitch-builder/VerificationSummary.tsx, ~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-15 / Pitch Builder layout flattening / Reduced pre-scenario clutter by collapsing pitch context + notes into a single compact panel, and moved extracted-section option blocks below the main composer so scenario selection appears sooner. (~ src/tabs/enquiries/pitch-builder/VerificationSummary.tsx, ~ src/tabs/enquiries/PitchBuilder.tsx)
2026-01-15 / Prospect contact actions / Standardised contact display under the client name (email + phone inline with subtle separator, tap-to-email/call and one-click copy) in InlineWorkbench. In Pitch Builder Prospect & Enquiry header, keep contact on the right under the “Contact” subheading with the same actions/copy. (~ src/tabs/instructions/InlineWorkbench.tsx, ~ src/tabs/enquiries/components/ProspectHeader.tsx)
2026-01-15 / Pitch Builder passcode link gating / Passcode now displays as an instruction link that stays masked/uncopyable until the user confirms Amount + Service Description and triggers Deal capture (same flow as after pitching). (~ src/tabs/enquiries/components/ProspectHeader.tsx, ~ src/tabs/enquiries/pitch-builder/VerificationSummary.tsx, ~ src/tabs/enquiries/PitchBuilder.tsx)
2026-01-15 / Pitch history context + Timeline endpoint fix / Pitch Builder header banner now warns when there are previous unconverted pitches (no “saved draft” wording). Enquiry Timeline no longer calls missing `/api/instruction-data` and instead derives lightweight pitch status directly from `/api/pitches`. (~ src/tabs/enquiries/pitch-builder/VerificationSummary.tsx, ~ src/tabs/enquiries/PitchBuilder.tsx, ~ src/tabs/enquiries/EnquiryTimeline.tsx)
2026-01-12 / Prospects: pipeline column icon-only / Pipeline header now shows labels only; pipeline cells render icon-only states (neutral when absent, coloured when present) and the claim prompt chip supports icon-only mode in the grid. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-12 / Payments: deal capture DB connection-string parsing fix / Support Data Source/Database variants (not just Server/Initial Catalog) so production doesn’t silently connect to the wrong DB and fail with “Invalid object name 'Deals'”. Mark missing-Deals-table as recoverable to avoid hard-failing email flows. (~ server/routes/dealCapture.js)
2026-01-12 / Console noise + missing endpoints fixes / Initialise Fluent UI icons before first render (stops “icon not registered” warnings); fix doc-workspace pending-actions URL to avoid `/api/api` double prefix; mount CallRail route in prod entrypoint; downgrade doc-workspace blob auth failures to 200 empty payload to avoid 500 spam. (~ src/index.tsx, ~ src/tabs/home/Home.tsx, ~ server/server.js, ~ server/routes/doc-workspace.js)
2026-01-11 / Enquiries: pipeline header alignment polish / Reserve a fixed gutter column (used for Clear Filters) across pipeline header + rows so headings stay perfectly aligned with chips even when the clear button appears. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-11 / Enquiries: pipeline header de-dup / Remove the separate pipeline headings row; the filter row now serves as the header so labels aren’t duplicated. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-11 / Enquiries: pipeline filter chip consistency / Standardise tri-state filter indicators: ✓ for Has, ✕ for No (removes mixed dot/tick behaviour). (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-11 / Enquiries: POC filter chip consistency / Replace the POC filter active dot with the same ✓ indicator used for other active filters. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-11 / Enquiries: Claimed tab claim filter cleanup / Hide redundant Claim tri-state stage filter in Claimed tab (claim is guaranteed); keep the person/POC filter only; ignore any persisted claimed-stage filter while in Claimed. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-11 / Enquiries: prefetch instruction data / Allow instruction data fetch when Prospects tab is active (for InlineWorkbench expansion), gated to users with Clients access; fixes “only notes” expansions unless Clients tab visited first. (~ src/app/App.tsx)
2026-01-11 / Enquiries: stacked date/time/ago / Enquiries table date column now renders as 3-line stack (weekday, date + optional time, and “x days ago”) with full timestamp preserved in tooltip. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-11 / Enquiries: pipeline + table readability / Removed Value column and stacked Value under ID to free space for Pipeline; added post-pitch stages; improved date cell readability. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-11 / Enquiries: fixed pipeline columns / Converted the pipeline header + row indicators into a fixed 8-column grid (Teams, Claim, Pitch, Inst, ID, £, Risk, Matter) so headings align and the table doesn’t shift. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-11 / Prospects: context chips not faded / When `enableContextStageChips` is enabled, Enquiry/Pitch/Instructed chips use the same status palette as the main workbench tabs (no greyed/faded styling) and connector lines reflect prior stage status. (~ src/tabs/instructions/InlineWorkbench.tsx)
2026-01-11 / Prospects: context chips show data / Clicking Enquiry now opens a lightweight context panel in the workbench Details view; Pitch uses a full-width Details-layout card showing pitch fields (amount/service/passcode etc); Instructed focuses the standard Details landing view. (~ src/tabs/instructions/InlineWorkbench.tsx)
2026-01-11 / Prospects: enable pipeline context chips / InlineWorkbench now allows Enquiry/Pitch/Instructed chips to be clickable when rendered in Prospects (Enquiry navigates back to Prospects; Pitch/Instructed focus Details). (~ src/tabs/instructions/InlineWorkbench.tsx, ~ src/tabs/enquiries/*)
2026-01-11 / Enquiries cards: InlineWorkbench expansion / Card view expansions now show InlineWorkbench (claimed/unclaimed/grouped) and linkage is more resilient (wrapper prospectId + deal-only records). (~ src/tabs/enquiries/Enquiries.tsx, ~ src/tabs/enquiries/ClaimedEnquiryCard.tsx, ~ src/tabs/enquiries/NewUnclaimedEnquiryCard.tsx, ~ src/tabs/enquiries/GroupedEnquiryCard.tsx, ~ src/tabs/enquiries/EnquiryLineItem.tsx, ~ src/tabs/enquiries/UnclaimedEnquiries.tsx)
2026-01-11 / Prospects: InlineWorkbench duplication / Show the existing Instructions InlineWorkbench under expanded Prospects (enquiries) table rows when linked instruction data exists; rows are expandable even when there are no notes. (~ src/tabs/enquiries/Enquiries.tsx)
2026-01-12 / Demo mode: instructions table demo row / When demo mode is enabled (UserBubble), Clients/Instructions table prepends a synthetic demo client/instruction row for screenshots and walkthroughs. (+ src/app/App.tsx, + src/tabs/instructions/Instructions.tsx)
2026-01-12 / Payments: deal capture SQL hardening + Redis log spam throttle / Schema-qualify Deals-related tables (dbo.*) to avoid default-schema issues and include dbName in failure logs; add cooldown + rate-limited logging for noisy Redis socket-close errors. (~ server/routes/dealCapture.js, ~ server/utils/redisClient.js)
2026-01-12 / ID verification: start verification modal clarity / Replaced notification controls with a clear summary of what checks run and confirmation that no client email is sent from Helix Hub; avoids leaving the user in the dark after clicking Start Verification. (~ src/tabs/instructions/InlineWorkbench.tsx)
2026-01-12 / Demo mode: ID verification simulation / Demo instruction now simulates EID processing → completion and updates the same pipeline/workbench UI states without performing any provider calls. (~ src/tabs/instructions/Instructions.tsx, ~ src/tabs/instructions/InlineWorkbench.tsx)
2026-01-10 / Reporting: WIP current week DB fallback / Fixed Management Dashboard not showing current week WIP when Clio unavailable. When wipClioCurrentWeek fails (401/token issues), stream now properly signals error status (instead of empty data) so frontend merge logic falls back to wipDbCurrentWeek dataset. Also added user credential fallback (lz/jw/ac) to reporting.js when clio-pbi token unavailable. (~ server/routes/reporting-stream.js, ~ server/routes/reporting.js)
2026-01-08 / ReportingHome + ManagementDashboard UX polish / Applied InlineWorkbench design patterns across reporting screens: added shimmer/pulse/slideIn/scaleIn animations, uppercase 9px section labels with letter-spacing, processing modal overlay that shows during data refresh, wired isFetching state to processing modal display, borderRadius: 0 throughout, fadeInUp entrance animations for sections, skeleton shimmer utility class in CSS. Dashboard now shows lightweight processing modal during refresh operations with spinner and progress bar. (~ src/tabs/Reporting/ReportingHome.tsx, ~ src/tabs/Reporting/ManagementDashboard.tsx, ~ src/tabs/Reporting/ManagementDashboard.css)
2026-01-09 / Reporting: totals explainer + disbursements toggle / Added a Disbursements include/exclude toggle (affects current + previous period Collected) and a bottom click-to-explain callout quantifying KPI vs table total deltas and explaining scope differences (all data vs visible members). (~ src/tabs/Reporting/ManagementDashboard.tsx)
2026-01-09 / Senior Partner role support / Treat “Senior Partner” as partner-class in reporting role filters and matter opening supervising partner selection; add Senior Partner role option where roles are selectable and ensure Partner selection still includes Senior Partner members. (~ src/tabs/Reporting/ManagementDashboard.tsx, ~ src/tabs/Reporting/MattersReport.tsx, ~ src/tabs/Reporting/EnquiriesReport.tsx, ~ src/tabs/Reporting/AnnualLeaveReport.tsx, ~ src/tabs/instructions/NewMatters.tsx, ~ src/tabs/instructions/MatterOpening/FlatMatterOpening.tsx, ~ src/tabs/instructions/DocumentEditorPage.tsx, ~ src/tabs/home/WeeklyAttendanceView.tsx)
2026-01-07 / Home time metrics load delay / Fixed ~5–10s delay in metrics appearing on Home load. Root cause: parallel fetch effect triggered 3x due to unstable deps (email/initials derived from userData), first 2 runs discarded as stale. LZ/Luke/localhost users had no Clio ID → home-wip returned zeros → triggered slow reporting fallback. Solution: removed email/initials from effect deps (derived from userData anyway), added Alex fallback logic to parallel fetch (matches handleRefreshTimeMetrics pattern), only trigger reporting fallback when truly needed (data exists but all zeros). Metrics now land immediately using lightweight endpoint, no unnecessary fallback. (~ src/tabs/home/Home.tsx)
2026-01-07 / To Do skeleton load / To Do now starts with skeleton chips and only shows the empty "All caught up" state after actions settle, avoiding the green empty-state flash before cards appear. (~ src/tabs/home/ImmediateActionsBar.tsx, ~ src/tabs/home/Home.tsx)
2026-01-07 / Annual leave approval To Do chip subtitle / Fix annual leave parallel-fetch mapping to preserve `person`/leave fields so “Approve Annual Leave” shows initials/names again. (~ src/tabs/home/Home.tsx)
2026-01-08 / Annual leave local+demo parity / In local data mode, derive annual leave approvers from team `AOW` (production routing). In demo mode, show a single “Approve Annual Leave (Demo)” To Do card instead of live approvals. (~ src/tabs/home/Home.tsx)
2026-01-11 / Annual leave approvals: construction routing fix / Stop treating AC as a broad-visibility approver; approvals now follow per-request `approvers` so construction requests show for JW + LZ only, and non-construction for AC + LZ. Also harden construction detection (AOW contains 'construction' or 'cs') in local-mode derivation and backend determineApprovers. (~ src/tabs/home/Home.tsx, ~ api/src/functions/getAnnualLeave.ts)
2026-01-11 / Demo mode: annual leave test cards / Remove the separate “Annual Leave Test Cards” feature toggle and make annual leave demo/test To Do cards controlled solely by the Demo Mode toggle. (~ src/components/UserBubble.tsx, ~ src/tabs/home/Home.tsx)
2026-01-08 / Attendance confirm modal crash / Repair TSX corruption in attendance confirm components and harden Week_Start normalisation + null-safe guards to prevent ErrorBoundary crash on open. (~ src/tabs/home/AttendanceConfirmPanel.tsx, ~ src/tabs/home/PersonalAttendanceConfirm.tsx)
2026-01-08 / Demo mode To Dos / Demo mode now forces demo To Do cards (Approve Annual Leave + Book Requested Leave + Confirm Attendance) and avoids writing live attendance during demos. Demo mode persists as a user-bubble toggle via localStorage. (~ src/app/App.tsx, ~ src/components/UserBubble.tsx, ~ src/tabs/home/Home.tsx, ~ src/tabs/home/PersonalAttendanceConfirm.tsx)
2026-01-08 / Metrics previous-period toggle + header status chip / Add a Current/Previous toggle in the Time Metrics header (applies to both Time + Conversion cards). Make the “Syncing Clio…” badge morph into an “Updated” badge in the same spot after refresh completes; label deltas as “vs previous” and prevent the initial count-up animation from re-running when viewing previous. (~ src/components/modern/TimeMetricsV2.tsx, ~ src/components/modern/EnquiryMetricsV2.tsx)
2026-01-08 / Clarify “Previous” meaning / For “Time Today”, Previous now means same weekday last week, with an explicit secondary “Yesterday” line when available. Week-to-date comparisons align to last week-to-date. (~ src/components/modern/TimeMetricsV2.tsx, ~ src/tabs/home/Home.tsx)
2026-01-08 / Home metrics delta tooltips / Remove modal/sidepane explainer and card-click breakdowns. Add subtle hover info bubbles next to delta indicators (Current view only), hide deltas when viewing Previous, and rename card titles in Previous view for clarity. (~ src/components/modern/TimeMetricsV2.tsx, ~ src/components/modern/EnquiryMetricsV2.tsx)
2026-01-08 / Home metrics details modal / Make Time + Conversion metric cards subtly clickable and open a Workbench-style modal explaining what each metric includes (period, comparator, optional AOW breakdown). (+ src/components/modern/MetricDetailsModal.tsx, ~ src/components/modern/TimeMetricsV2.tsx, ~ src/components/modern/EnquiryMetricsV2.tsx)
2026-01-07 / Fix financial forms / Registered `/api/financial-task` on legacy server entrypoint (+ server/server.js)
2026-01-07 / Home time metrics dropping to 0 / Don't abort fetch controller on effect cleanup (was killing requests in React Strict Mode before they completed); treat `/api/home-wip` `{ error }` as failure; extend stale cache TTL; retry once on Clio 401 after clearing token cache (+ src/tabs/home/Home.tsx, server/routes/home-wip.js)
# Changelog
 2026-01-06 / Rate change modal: bulk pressure test outstanding matters / Added `scripts/bulkPressureTestRateChangeOutstanding.mjs` to bulk sync outstanding (pending) matters via `/api/rate-changes/sync-matters`. Hardened the bulk sync endpoint with 429 backoff + light throttling to avoid Clio rate limits. (~ server/routes/rate-changes.js, + scripts/bulkPressureTestRateChangeOutstanding.mjs)

 2026-01-12 / Cleaned up Data Flow workbench copy to match current architecture (simplified UI → /api → Functions/Express → DBs/integrations) and removed outdated “Instructions vs Enquiries” narrative.
 2026-01-06 / Rate change modal: hide new-rate matters / Exclude matters opened in the rate-change year from the main notification list (opened on/after 1 Jan 2026), while keeping them available under the Migrate tab via a separate dataset fetch. (~ server/routes/rate-changes.js, ~ src/tabs/home/useRateChangeData.ts, ~ src/tabs/home/Home.tsx, ~ src/tabs/home/RateChangeModal.tsx)
- 2026-01-06 / Enquiries realtime stream / Added SSE stream at `/api/enquiries-unified/stream`, broadcast on update/create/delete/cleanup and claim; Enquiries tab subscribes when active with debounced refresh; throttled server cache flush in refreshEnquiries. (server/utils/enquiries-stream.js, server/routes/enquiries-unified.js, server/routes/claimEnquiry.js, server/index.js, src/tabs/enquiries/Enquiries.tsx, src/index.tsx, src/setupProxy.js)

- 2026-01-06 / Enquiries stream debugging logs / Added reason-tagged console logs for team-wide fetch triggers + SSE lifecycle/events to quickly diagnose repeated `/api/enquiries-unified` calls without logging PII. (~ src/tabs/enquiries/Enquiries.tsx)

- 2026-01-07 / Enquiries realtime claim patch / SSE claim events now include `claimedAt`, and the Enquiries UI applies an immediate local patch (POC + optional claim time) so claimed/unclaimed filters and counts update instantly; keeps a slower backstop refresh to reconcile. (~ server/routes/claimEnquiry.js, ~ src/tabs/enquiries/Enquiries.tsx)

- 2026-01-07 / Enquiries realtime external claims / While SSE clients are connected, Hub now polls `TeamsBotActivityTracking.UpdatedAt` and broadcasts claim/unclaim changes as SSE events, so the Enquiries UI responds in realtime even when claims originate outside Hub routes (e.g. platform/Teams bot). (~ server/utils/enquiries-stream.js, ~ src/tabs/enquiries/Enquiries.tsx)

- 2026-01-07 / Enquiries realtime watcher hardening / Deduped external-claim broadcasts per enquiryId and switched the polling watermark compare to `UpdatedAt >= since` to avoid edge-case misses; increased batch size. (~ server/utils/enquiries-stream.js)

- 2026-01-07 / Local dev startup stabilisation / Auto-resets corrupted Azurite state on boot; avoids `/api/matters-unified` cold-start stalls in local dev; treats doc-workspace blob auth failures as empty results. (~ scripts/startAzurite.mjs, ~ package.json, ~ src/index.tsx, ~ server/routes/doc-workspace.js)

- 2026-01-07 / Home metrics stability / Avoid deprecated `/api/getAllMatters` 410s in local dev and harden WIP metrics fetch against abort/race (dedupe, cancel, retry once). Also cleaned up a few new lint warnings introduced during the change. (~ src/index.tsx, ~ src/tabs/home/Home.tsx)

- 2026-01-07 / Dead code cleanup (round 1) / Removed a handful of clearly-unused imports/consts flagged by ESLint (safe, no behaviour changes). Added roadmap item for broader cleanup. (~ src/tabs/home/*, ~ .github/instructions/ROADMAP.md)

- 2026-01-07 / Dead code cleanup (round 2) / Removed additional clearly-unused imports/vars in Home tab components (safe, no behaviour changes). (~ src/tabs/home/ActionSection.tsx, ~ src/tabs/home/AttendanceCompact.tsx, ~ src/tabs/home/EnhancedAttendanceNew.tsx, ~ src/tabs/home/HomePanel.tsx, ~ src/tabs/home/PersonalAttendanceConfirm.tsx)

- 2026-01-07 / Home page enquiry metrics standalone route / Created `/api/home-enquiries` endpoint that returns aggregated enquiry counts (today/week/month + prev periods + matters opened) via server-side SQL instead of client-side filtering. Queries both legacy and instructions DBs, 60s Redis cache with stale fallback. Home now fetches this lightweight endpoint independently of the heavy enquiries-unified payload. Added separate `isLoadingEnquiryMetrics` prop for skeleton state. (+ server/routes/home-enquiries.js, ~ server/server.js, ~ src/tabs/home/Home.tsx, ~ src/components/modern/TimeMetricsV2.tsx)

- 2026-01-06 / ChunkLoadError auto-recovery / Added a one-time reload fallback when CRA code-split chunks fail to load (common after dev server restarts with stale chunk URLs). (~ src/index.tsx)

- 2026-01-06 / Unified matters stall diagnostics / Added server timing logs + response timeout for `/api/matters-unified` and client-side pending/timeout logging for the unified matters fetch. (~ server/routes/mattersUnified.js, ~ src/index.tsx)

- 2026-01-06 / Update Alex + Jonathan signatures / Set title to “Senior Partner” for JW + AC, and add an extra “Alex” line above “Alex Cook” in AC signature (+ v2 + txt/rtf variants)
 2026-01-06 / Rate change modal: sync open/close dates / Updated rate-change Clio→SQL sync endpoints to also persist matter Open Date + Close Date (so modal sorting/filtering isn't reliant on stale legacy SQL dates). (~ server/routes/rate-changes.js, ~ src/tabs/home/RateChangeModal.tsx)
 2026-01-06 / Matter Opening: Workbench-structure + opponent entry / Replaced the bespoke ID verification tile block in PoidSelectionStep with IdentityConfirmationCard (Workbench-style layout incl. document-provided + meta row). Also allow entering opponent/solicitor details before confirming no-conflict (Continue remains disabled until confirmed). (~ src/tabs/instructions/MatterOpening/PoidSelectionStep.tsx, ~ src/tabs/instructions/MatterOpening/OpponentDetailsStep.tsx)
 2026-01-06 / Matter Opening: Client summary clarity / Reworked client personal details banner into structured Contact/Address/Personal tiles (no more raw “dump”); updated conflict context tiles so populated Matter/Opponent/Solicitor read as active/selected rather than faded. (~ src/tabs/instructions/MatterOpening/PoidSelectionStep.tsx, ~ src/tabs/instructions/MatterOpening/ConflictConfirmationCard.tsx)
 2026-01-06 / Matter Opening: Fix POID selection regression / Restored PoidSelectionStep selection-context logic after JSX was mistakenly inserted into a useMemo, breaking compilation. Structured Contact/Address/Personal tiles now render in the banner scope (where selectedPoid exists). (~ src/tabs/instructions/MatterOpening/PoidSelectionStep.tsx)
 2026-01-06 / Matter Opening: ID & Conflict confirmation cards / Created two new InlineWorkbench-style components for Matter Opening flow: IdentityConfirmationCard (rich ID verification display with status banners, tiles for ID/PEP/Address, confirmation toggle with override modal) and ConflictConfirmationCard (conflict check display with client/matter/opponent context tiles, checklist modal for Clio search confirmation). Replaced simple ModernMultiSelect conflict picker in OpponentDetailsStep with the enhanced ConflictConfirmationCard. Added clientDisplayName useMemo to FlatMatterOpening and passed clientName + matterDescription props through. (+ src/tabs/instructions/MatterOpening/IdentityConfirmationCard.tsx, + src/tabs/instructions/MatterOpening/ConflictConfirmationCard.tsx, + src/tabs/instructions/MatterOpening/components.ts, ~ src/tabs/instructions/MatterOpening/OpponentDetailsStep.tsx, ~ src/tabs/instructions/MatterOpening/FlatMatterOpening.tsx)
 2026-01-06 / Inline workbench: Manual ID approval indicator / EID section now clearly distinguishes between automatic "Pass" and manual "Approved" status. When ID was manually approved despite underlying check issues (e.g. Address = Review), displays "ID Approved" banner with explanation, "Manually Approved" badge on EID header, and shows "Approved" in Overall tile while preserving original individual check results. (~ src/tabs/instructions/InlineWorkbench.tsx)
 2026-01-05 / Global Toast System / Created centralised ToastProvider context with useToast hook for app-wide toast notifications. Supports success/error/warning/info/loading states with automatic dismissal, dark mode, and action buttons. Integrated into App.tsx and migrated InlineWorkbench + Instructions.tsx from local toast state to global system. (+ src/components/feedback/ToastProvider.tsx, ~ src/app/App.tsx, ~ src/tabs/instructions/InlineWorkbench.tsx, ~ src/tabs/instructions/Instructions.tsx)
 2026-01-05 / Inline workbench / Approve and Request docs actions now open proper modals with clear prompts: Approve modal explains what confirmation means; Request docs modal shows email preview/template, explains fee earner drafts then sends, and notes that "Docs received" status is manual until systematic tracking is built. (~ src/tabs/instructions/InlineWorkbench.tsx)
 2026-01-05 / Inline workbench / Simplified ID layout: Individual clients show one card (details + address); Company clients show two side-by-side cards — Individual (details + address) | Company (details + registered address). Each card is self-contained. (~ src/tabs/instructions/InlineWorkbench.tsx)
 2026-01-05 / Inline workbench / Restructured company client ID view: added prominent "COMPANY CLIENT" banner with company name + number, header now shows individual name with "Director / Individual" label. (~ src/tabs/instructions/InlineWorkbench.tsx)
 2026-01-05 / Inline workbench / Removed redundant "View Details" action from the ID Verified banner now that EID details are inline/expanded by default. (~ src/tabs/instructions/InlineWorkbench.tsx)
 2026-01-05 / Inline workbench / Company client ID section now shows the individual/director details the EID check is run against (with a clear confirmation prompt when missing) instead of only company entity context. (~ src/tabs/instructions/InlineWorkbench.tsx)
 2026-01-05 / Inline workbench / Individual checked panel now wraps long values and shows postcode within the address line (no separate postcode field). (~ src/tabs/instructions/InlineWorkbench.tsx)
 2026-01-05 / Inline workbench / EID results now render as compact cards with status pills, and expanded details include a workflow state strip + recommended action guidance (restoring the best parts of the old review modal inline). (~ src/tabs/instructions/InlineWorkbench.tsx)
 2026-01-05 / Inline workbench / Moved Business Details into the Company Address card so Personal sits side-by-side with Company Address+Business Details at the top. (~ src/tabs/instructions/InlineWorkbench.tsx)
 2026-01-05 / Inline workbench / Company Address card now shows Business Details above the address fields; Document Provided now uses a passport vs driving-licence selector button layout with the non-selected option disabled. (~ src/tabs/instructions/InlineWorkbench.tsx)
 2026-01-05 / Inline workbench / Added a Show raw record toggle in expanded EID details to view the stored raw verification payload inline (pretty-printed when JSON). (~ src/tabs/instructions/InlineWorkbench.tsx)
 2026-01-05 / Inline workbench / Prevent delayed placeholder EID failure text like “Check failed or requires review (N/A)” from appearing after verification details load. (~ src/tabs/instructions/InlineWorkbench.tsx)
 2026-01-05 / Inline workbench / Fixed Company Address “No./Street” row alignment by matching grid columns to other address rows and trimming house number display. (~ src/tabs/instructions/InlineWorkbench.tsx)
 2026-01-05 / Inline workbench / Document Provided buttons are now taller with icons and embedded values (no extra detail panel below), and the Recommended action box has been removed (workflow chips retained). (~ src/tabs/instructions/InlineWorkbench.tsx)
 2026-01-05 / Inline workbench / EID meta rows: removed duplicate Corr reference, renamed “Tiller ID” to “Corr”, and left-aligned meta labels while keeping value column start fixed. (~ src/tabs/instructions/InlineWorkbench.tsx)
 2026-01-05 / Inline workbench / Clarified workflow chips to “EID status” (Pending / Needs review / Verified) and stopped using docsRequested/docsReceived so uploaded documents don’t incorrectly drive the state yet. (~ src/tabs/instructions/InlineWorkbench.tsx)
 2026-01-05 / Inline workbench / ID verification now expands inline inside EID Results with per-check dates + fail breakdown; Request docs is internal-only (draft to fee earner), and duplicate summary lines removed. (+ src/tabs/instructions/InlineWorkbench.tsx, src/services/verificationAPI.ts)
2026-01-05 / Inline workbench / Combined ID Document + EID Results into a single full-width ID Verification box for clearer scanning. (+ src/tabs/instructions/InlineWorkbench.tsx)
2026-01-05 / Inline workbench / EID expanded details now surface provider + reference IDs (when available), and the ID Verification header includes a status pill for clearer scanning. (+ src/tabs/instructions/InlineWorkbench.tsx)
2026-01-05 / Inline workbench / EID details are expanded by default and checked dates are date-only (no 00:00). (+ src/tabs/instructions/InlineWorkbench.tsx)
2026-01-05 / Inline workbench / Hide placeholder EID failure reasons (e.g. N/A) so “Fail” only appears when there’s a real issue. (~ src/tabs/instructions/InlineWorkbench.tsx)
2026-01-05 / Inline workbench / EID details now show provider correlation ID (Tiller ID) instead of repeating email, and Approve/Request docs require confirmation. (~ src/tabs/instructions/InlineWorkbench.tsx)
2026-01-05 / Inline workbench / EID tiles now use a simple status icon and no longer repeat per-tile checked dates (single checked date is enough). (~ src/tabs/instructions/InlineWorkbench.tsx)

- 2026-01-05 / Home demo-mode default / Demo mode no longer persists across reloads; clears stale localStorage so Home doesn't show demo data unless explicitly enabled. (~ src/app/App.tsx)

- 2026-01-05 / Instructions: ID review in tray / ID verification Review/View Details now opens the existing review UI inside the inline workbench tray (no legacy modal), preserving approve/request/draft actions. (~ src/tabs/instructions/InlineWorkbench.tsx, ~ src/components/modals/IDVerificationReviewModal.tsx)

- 2026-01-05 / InlineWorkbench identity cards: data-per-source + Teams fallback / Redesigned avatar section to show key data fields per source (SQL: name/email/phone; AC: contact ID + status; Teams: tracking/enquiry ID + status). Added ProspectId fallback for Teams link resolution so instructions linked to enquiries can resolve Teams cards even without direct tracking IDs. All three tiles now always visible with reduced opacity when not linked. (~ src/tabs/instructions/InlineWorkbench.tsx)

- 2026-01-05 / Reporting LogMonitor production fix / Fixed SSE log streaming reliability by making CORS origin checks request-aware (allow same-origin behind proxies) and flushing SSE headers/writes for /api/logs/stream. (~ server/index.js, ~ server/routes/logs-stream.js)

- 2026-01-05 / Reports visual refresh / Aligned Reporting surfaces with the newer Helix dark styling: horizontal gradients + brand borders on overview + cards, theme-aware report card text, and removed off-brand sky-blue accents in the shared glass container. (~ src/tabs/Reporting/ReportingHome.tsx, ~ src/tabs/Reporting/ReportCard.tsx, ~ src/tabs/Reporting/components/ReportingSectionCard.tsx, ~ src/tabs/Reporting/ManagementDashboard.css)

- 2026-01-05 / Instructions workbench: AC badge opens wrong contact / Centralised ActiveCampaign contact ID resolution and fixed precedence to prefer instruction-level ACID/acid over deal-level ProspectId when both exist. Added Jest coverage for the resolver. (+ src/utils/resolveActiveCampaignContactId.ts, + src/utils/__tests__/resolveActiveCampaignContactId.test.ts, ~ src/tabs/instructions/InlineWorkbench.tsx)

- 2026-01-05 / Tech tickets: problem submit 400 + ledger dark mode / Fixed Tech Problem form payload to match /api/tech-tickets/problem contract (system/summary/expectedVsActual/urgency) and corrected Tech Tickets ledger row text colour in dark mode. (~ src/CustomForms/TechProblemForm.tsx, ~ src/CustomForms/shared/TechTicketsLedger.tsx)

- 2026-01-05 / Test stability: Jest open handle / Unref'd the delayed SQL health-check startup timer so it doesn't keep Node/Jest alive after tests complete. (~ server/utils/db.js)

- 2026-01-04 / Session-start: submodule check messaging / Clarified session-start output to explicitly state submodule checks are read-only. (~ scripts/session-start.mjs)

- 2026-01-04 / Instructions tab backtrack links: AC & Teams origin / Added subtle origin indicators on the avatar (AC + T). AC deep-links to the ActiveCampaign contact; Teams resolves a deep link to the original Teams card via /api/teams-activity-tracking when an enquiryId/record id is available, with safe fallback to Teams web. Positioned as small overlay badges to cue provenance without clutter. (~ src/tabs/instructions/InlineWorkbench.tsx)

- 2026-01-04 / Instructions tab redesign: comprehensive client overview / Transformed identity tab into full "Instructions" client workspace. Added prominent header with person/company avatar, primary name/company name & number, and quick contact details (email/phone/ref). Below: key details grid (DOB, Nationality, City, Postcode), full address card with copy, then ID verification section (passport/license only, removed false "national ID"), EID results, and business details. Space now shows complete instruction/client picture—not just ID verification, but full checkpoint for all client details and verification status. (~ src/tabs/instructions/InlineWorkbench.tsx)

- 2026-01-04 / Workbench visual clarity: ID documents & payments / Enhanced ID document section to visually show which document was used (passport/license/national ID) with green highlight and indicator dot, grayed-out alternatives, and properly formatted date of birth (no timestamp). Similarly added payment method selector showing card vs bank transfer with visual status indicators. Space now speaks for itself—clearly shows situation, position, and alternatives. (~ src/tabs/instructions/InlineWorkbench.tsx)

- 2026-01-04 / Inline workbench per instruction row / Moved workbench from page-level global component to inline expansion within each instruction row. Created InlineWorkbench.tsx component with tabbed sections (ID, PAY, DOCS, RISK, MATTER). Click row to toggle workbench. Includes header with instruction ref, notes/description, and all pipeline action buttons. Removed page-level workbench visibility triggers from onRowClick. (+ src/tabs/instructions/InlineWorkbench.tsx, ~ src/tabs/instructions/InstructionTableView.tsx, ~ src/tabs/instructions/Instructions.tsx)

- 2026-01-04 / Instructions table ref selector not opening / Replaced inline absolute dropdown with Fluent UI Callout anchored to the reference chip (avoids overflow clipping) and keyed view-mode state by a stable selector key (email/ref fallback). (~ src/tabs/instructions/InstructionTableView.tsx)

- 2026-01-04 / Instructions table ref cue + linking / Added an explicit multi-ref count badge and a stacked secondary ref line to visually link matter + instruction in the same chip area (and removed debug console spam). (~ src/tabs/instructions/InstructionTableView.tsx)

- 2026-01-04 / Instructions table chip compactness / Reverted ref chip to single-line height; replaced badge with subtle dot cue; show matter↔instruction linkage only inside the open selector. (~ src/tabs/instructions/InstructionTableView.tsx)

- 2026-01-04 / Instructions table chip overlap / Constrained ref chip to its fixed-width cell (clip overflow) so it doesn't overlap the pipeline connector line. (~ src/tabs/instructions/InstructionTableView.tsx)

- 2026-01-02 / Workbench UI consistency redesign / Redesigned Matter Opening Workbench (ID/PAY/DOCS/RISK/MATTER tabs) for better consistency with app design patterns. Simplified header styling, removed complex gradients/shadows, aligned tab design with app conventions, improved color consistency using established theme system. Cleaner visual hierarchy, consistent spacing, and reduced visual noise while maintaining full functionality. (~ src/tabs/instructions/Instructions.tsx)

- 2026-01-02 / Enquiries ID column shows instruction reference / Added instruction reference display beneath enquiry ID when a pitch/deal exists with an InstructionRef. Matches Instructions table pattern (ID + Reference stacked). Updated backend SQL to include InstructionRef, added field to pitchEntry object and TypeScript interface. (~ server/routes/enquiryEnrichment.js, src/app/functionality/enquiryEnrichment.ts, src/tabs/enquiries/Enquiries.tsx)

- 2026-01-02 / Pitch builder caret jumps to start while typing / Fixed body sync effect to treat focus within editor children (e.g. placeholder spans) as focused, preventing innerHTML rewrites during typing. (~ src/tabs/enquiries/PitchBuilder.tsx)
- 2026-01-06 / Financial forms failing with attachments / Increased Express JSON body limit (base64 uploads) and fixed Payment Requests >£50k field key mismatch. (~ server/index.js, server/routes/financialTask.js)
- 2026-01-06 / Financial forms traceability / Added structured trace logs for /api/financial-task and a JSON error middleware (incl. payload-too-large) for clearer Azure Log Stream debugging. (~ server/index.js, server/routes/financialTask.js)
- 2026-01-06 / Edge Tools hygiene: signatures + nested interactive + CSS prefixes / Added rel="noopener noreferrer" to signature links (bulk script + sendEmail safety-net), removed button-like role/tabIndex from InstructionCard wrapper to avoid nested interactive controls, and reordered -webkit CSS properties before unprefixed equivalents. (+ scripts/fix-signature-noopener.mjs, ~ src/assets/signatures/**, ~ server/routes/sendEmail.js, ~ src/tabs/instructions/InstructionCard.tsx, ~ src/tabs/Reporting/ManagementDashboard.css)

- 2026-01-01 / Annual leave UX polish & space booking system / Enhanced annual leave delete modal contrast for dark mode (pure white text). Fully tested half-day leave functionality via terminal with database schema updates (half_day_start/half_day_end columns). **Major**: Space booking system fully operational - fixed bookSpace.js imports, added attendanceQuery pattern, tested Boardroom/Soundproof Pod bookings with Clio integration. Added DELETE endpoint + UI delete functionality with confirmation dialogs. Cleaned availability UI to only show dates with bookings. Added booking refresh after creation. (~ src/CustomForms/AnnualLeaveForm.tsx, BookSpaceForm.tsx, server/routes/bookSpace.js, server/server.js, src/tabs/home/Home.tsx, + scripts/createBookingTables.mjs, deleteTestBookings.mjs)

- 2026-01-01 / Instructions day folding not applying / Fixed local/static server to prefer serving latest CRA output from build/ so UI code changes (e.g., day folding/hover) show up after rebuild. (~ server/index.js, server/server.js)

- 2025-12-31 / Pitch builder production refinements / Cleaned up pitch builder for production: standardized terminology (Scope of Work, Quote Amount), simplified labels (removed colons, reduced verbosity), cleaner VAT toggle ("No VAT (international)"), improved error display, consolidated confirmation messages. Enhanced UI with refined borders (8px radius), softer shadows, smoother transitions (cubic-bezier), subtle focus glows, better card hover states. Professional polish throughout. (~ src/tabs/enquiries/pitch-builder/DealCapture.tsx, PaymentPreview.tsx, EditorAndTemplateBlocks.tsx)

- 2025-12-30 / Migrate decoupled-functions to Express / Ported 5 functions to direct SQL in Express routes (matterRequests, opponents, ccl, pitches). Deleted ALL remaining decoupled function folders (15 total). decoupled-functions/ now empty except scaffolding. No more dependency on instructions-vnet-functions Azure Function App. (~ server/routes/matterRequests.js, server/routes/opponents.js, server/routes/ccl.js, server/routes/pitches.js, - decoupled-functions/*/)

- 2025-12-30 / Dead code removal: decoupled-functions / Deleted 8 unused Azure Functions: fetchEnquiryEmails, fetchEnquiriesData, recordRiskAssessment, dealCapture, importInstructionData, deleteTestMatters, insertEnquiry, sendEmail. Also removed dead routes: enquiries.js, enquiryEmails.js, EnquiryEmails.tsx. (- decoupled-functions/*, server/routes/enquiries.js, server/routes/enquiryEmails.js, src/tabs/enquiries/EnquiryEmails.tsx)

- 2025-12-30 / Foundation cleanup / Archived one-off scripts, fixed stale file references in instruction docs, added doc maintenance rule to copilot-instructions. (+ scripts/archive/, .github/copilot-instructions.md, .github/instructions/*.md)

- 2025-12-30 / Agent infrastructure / Built context sync system for autonomous agents. Scripts auto-generate REALTIME_CONTEXT.md with branch state, submodule status, server ports. Session start protocol established. (+ scripts/sync-context.mjs, scripts/update-submodules.mjs, scripts/validate-instructions.mjs, scripts/session-start.mjs, .github/instructions/REALTIME_CONTEXT.md, .github/copilot-instructions.md)

- 2025-12-30 / 2025 Rate Update / Updated all fee earner rates in both databases (helix-core-data, instructions). Alex Cook + Jonathan Waters → Senior Partner £475. All roles updated to new structure. (+ scripts/updateRates2025.mjs, scripts/updateRatesInstructions.mjs, database/migrations/010_2025_rate_update.md, .github/instructions/TEAM_DATA_REFERENCE.md)

- 2025-12-30 / Instruction files foundation / Added TEAM_DATA_REFERENCE.md, WORKSPACE_OPTIMIZATION.md. Updated copilot-instructions.md to match typefxce foundation pattern. (+ .github/instructions/*, .github/copilot-instructions.md)

- 2026-01-08 / Conversion metrics reloading / Stabilised conversion metric cards by removing refresh-based remounting and using a short refresh pulse animation (src/components/modern/EnquiryMetricsV2.tsx)

- 2026-01-08 / Conversion metrics breakdown inspect / Home now stores `/api/home-enquiries` `breakdown` payload and passes it into Conversion Metrics; enquiry cards show a subtle inspect cue and open a BespokePanel modal with top AOW segments (today/week/month). (~ server/routes/home-enquiries.js, ~ src/tabs/home/Home.tsx, ~ src/components/modern/TimeMetricsV2.tsx, ~ src/components/modern/EnquiryMetricsV2.tsx)
