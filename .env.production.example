# Database Configuration for Production (Azure App Service)
# These settings are optimized for Teams mobile clients and Azure SQL

# Connection Pool Settings
# Maximum concurrent SQL requests (increased for production scale)
SQL_MAX_CONCURRENT_REQUESTS=25

# Maximum connections in pool (should match or exceed concurrent requests)
SQL_POOL_MAX=25

# Minimum idle connections to keep warm
SQL_POOL_MIN=2

# Timeout Settings (in milliseconds)
# Request timeout - how long a query can run (60s for mobile clients)
SQL_REQUEST_TIMEOUT_MS=60000

# Connection timeout - how long to wait for initial connection (15s)
SQL_CONNECTION_TIMEOUT_MS=15000

# Pool acquire timeout - how long to wait for connection from pool (10s)
SQL_POOL_ACQUIRE_TIMEOUT_MS=10000

# Idle connection timeout - how long unused connections stay open (30s)
SQL_POOL_IDLE_TIMEOUT_MS=30000

# Request queue timeout - how long requests wait in queue before failing (30s)
SQL_QUEUE_TIMEOUT_MS=30000

# Health check interval - how often to validate pool connections (2 minutes)
SQL_HEALTH_CHECK_INTERVAL_MS=120000

# For higher concurrency (if still experiencing issues), increase:
# SQL_MAX_CONCURRENT_REQUESTS=50
# SQL_POOL_MAX=50
# SQL_QUEUE_TIMEOUT_MS=45000
